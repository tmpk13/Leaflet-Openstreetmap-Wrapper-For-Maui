var p7=Object.create;var{getPrototypeOf:l7,defineProperty:M6,getOwnPropertyNames:i7}=Object;var r7=Object.prototype.hasOwnProperty;var a7=(H,M,I)=>{I=H!=null?p7(l7(H)):{};let B=M||!H||!H.__esModule?M6(I,"default",{value:H,enumerable:!0}):I;for(let A of i7(H))if(!r7.call(B,A))M6(B,A,{get:()=>H[A],enumerable:!0});return B};var s7=(H,M)=>()=>(M||H((M={exports:{}}).exports,M),M.exports);var A6=s7((M1,Z6)=>{(function(H,M){typeof M1==="object"&&typeof Z6<"u"?M(M1):typeof define==="function"&&define.amd?define(["exports"],M):(H=typeof globalThis<"u"?globalThis:H||self,M(H.leaflet={}))})(M1,function(H){var M="1.9.4";function I(Q){var J,Y,X,K;for(Y=1,X=arguments.length;Y<X;Y++){K=arguments[Y];for(J in K)Q[J]=K[J]}return Q}var B=Object.create||function(){function Q(){}return function(J){return Q.prototype=J,new Q}}();function A(Q,J){var Y=Array.prototype.slice;if(Q.bind)return Q.bind.apply(Q,Y.call(arguments,1));var X=Y.call(arguments,2);return function(){return Q.apply(J,X.length?X.concat(Y.call(arguments)):arguments)}}var d=0;function D(Q){if(!("_leaflet_id"in Q))Q._leaflet_id=++d;return Q._leaflet_id}function s(Q,J,Y){var X,K,V,U;return U=function(){if(X=!1,K)V.apply(Y,K),K=!1},V=function(){if(X)K=arguments;else Q.apply(Y,arguments),setTimeout(U,J),X=!0},V}function y(Q,J,Y){var X=J[1],K=J[0],V=X-K;return Q===X&&Y?Q:((Q-K)%V+V)%V+K}function w(){return!1}function u(Q,J){if(J===!1)return Q;var Y=Math.pow(10,J===void 0?6:J);return Math.round(Q*Y)/Y}function K0(Q){return Q.trim?Q.trim():Q.replace(/^\s+|\s+$/g,"")}function Q0(Q){return K0(Q).split(/\s+/)}function f(Q,J){if(!Object.prototype.hasOwnProperty.call(Q,"options"))Q.options=Q.options?B(Q.options):{};for(var Y in J)Q.options[Y]=J[Y];return Q.options}function o1(Q,J,Y){var X=[];for(var K in Q)X.push(encodeURIComponent(Y?K.toUpperCase():K)+"="+encodeURIComponent(Q[K]));return(!J||J.indexOf("?")===-1?"?":"&")+X.join("&")}var R6=/\{ *([\w_ -]+) *\}/g;function e1(Q,J){return Q.replace(R6,function(Y,X){var K=J[X];if(K===void 0)throw Error("No value provided for variable "+Y);else if(typeof K==="function")K=K(J);return K})}var J0=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"};function Z1(Q,J){for(var Y=0;Y<Q.length;Y++)if(Q[Y]===J)return Y;return-1}var a0="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A1(Q){return window["webkit"+Q]||window["moz"+Q]||window["ms"+Q]}var Q5=0;function J5(Q){var J=+new Date,Y=Math.max(0,16-(J-Q5));return Q5=J+Y,window.setTimeout(Q,Y)}var R1=window.requestAnimationFrame||A1("RequestAnimationFrame")||J5,Y5=window.cancelAnimationFrame||A1("CancelAnimationFrame")||A1("CancelRequestAnimationFrame")||function(Q){window.clearTimeout(Q)};function p(Q,J,Y){if(Y&&R1===J5)Q.call(J);else return R1.call(window,A(Q,J))}function n(Q){if(Q)Y5.call(window,Q)}var N6={__proto__:null,extend:I,create:B,bind:A,get lastId(){return d},stamp:D,throttle:s,wrapNum:y,falseFn:w,formatNum:u,trim:K0,splitWords:Q0,setOptions:f,getParamString:o1,template:e1,isArray:J0,indexOf:Z1,emptyImageUrl:a0,requestFn:R1,cancelFn:Y5,requestAnimFrame:p,cancelAnimFrame:n};function H0(){}H0.extend=function(Q){var J=function(){if(f(this),this.initialize)this.initialize.apply(this,arguments);this.callInitHooks()},Y=J.__super__=this.prototype,X=B(Y);X.constructor=J,J.prototype=X;for(var K in this)if(Object.prototype.hasOwnProperty.call(this,K)&&K!=="prototype"&&K!=="__super__")J[K]=this[K];if(Q.statics)I(J,Q.statics);if(Q.includes)F6(Q.includes),I.apply(null,[X].concat(Q.includes));if(I(X,Q),delete X.statics,delete X.includes,X.options)X.options=Y.options?B(Y.options):{},I(X.options,Q.options);return X._initHooks=[],X.callInitHooks=function(){if(this._initHooksCalled)return;if(Y.callInitHooks)Y.callInitHooks.call(this);this._initHooksCalled=!0;for(var V=0,U=X._initHooks.length;V<U;V++)X._initHooks[V].call(this)},J},H0.include=function(Q){var J=this.prototype.options;if(I(this.prototype,Q),Q.options)this.prototype.options=J,this.mergeOptions(Q.options);return this},H0.mergeOptions=function(Q){return I(this.prototype.options,Q),this},H0.addInitHook=function(Q){var J=Array.prototype.slice.call(arguments,1),Y=typeof Q==="function"?Q:function(){this[Q].apply(this,J)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(Y),this};function F6(Q){if(typeof L>"u"||!L||!L.Mixin)return;Q=J0(Q)?Q:[Q];for(var J=0;J<Q.length;J++)if(Q[J]===L.Mixin.Events)console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",Error().stack)}var a={on:function(Q,J,Y){if(typeof Q==="object")for(var X in Q)this._on(X,Q[X],J);else{Q=Q0(Q);for(var K=0,V=Q.length;K<V;K++)this._on(Q[K],J,Y)}return this},off:function(Q,J,Y){if(!arguments.length)delete this._events;else if(typeof Q==="object")for(var X in Q)this._off(X,Q[X],J);else{Q=Q0(Q);var K=arguments.length===1;for(var V=0,U=Q.length;V<U;V++)if(K)this._off(Q[V]);else this._off(Q[V],J,Y)}return this},_on:function(Q,J,Y,X){if(typeof J!=="function"){console.warn("wrong listener type: "+typeof J);return}if(this._listens(Q,J,Y)!==!1)return;if(Y===this)Y=void 0;var K={fn:J,ctx:Y};if(X)K.once=!0;this._events=this._events||{},this._events[Q]=this._events[Q]||[],this._events[Q].push(K)},_off:function(Q,J,Y){var X,K,V;if(!this._events)return;if(X=this._events[Q],!X)return;if(arguments.length===1){if(this._firingCount)for(K=0,V=X.length;K<V;K++)X[K].fn=w;delete this._events[Q];return}if(typeof J!=="function"){console.warn("wrong listener type: "+typeof J);return}var U=this._listens(Q,J,Y);if(U!==!1){var $=X[U];if(this._firingCount)$.fn=w,this._events[Q]=X=X.slice();X.splice(U,1)}},fire:function(Q,J,Y){if(!this.listens(Q,Y))return this;var X=I({},J,{type:Q,target:this,sourceTarget:J&&J.sourceTarget||this});if(this._events){var K=this._events[Q];if(K){this._firingCount=this._firingCount+1||1;for(var V=0,U=K.length;V<U;V++){var $=K[V],W=$.fn;if($.once)this.off(Q,W,$.ctx);W.call($.ctx||this,X)}this._firingCount--}}if(Y)this._propagateEvent(X);return this},listens:function(Q,J,Y,X){if(typeof Q!=="string")console.warn('"string" type argument expected');var K=J;if(typeof J!=="function")X=!!J,K=void 0,Y=void 0;var V=this._events&&this._events[Q];if(V&&V.length){if(this._listens(Q,K,Y)!==!1)return!0}if(X){for(var U in this._eventParents)if(this._eventParents[U].listens(Q,J,Y,X))return!0}return!1},_listens:function(Q,J,Y){if(!this._events)return!1;var X=this._events[Q]||[];if(!J)return!!X.length;if(Y===this)Y=void 0;for(var K=0,V=X.length;K<V;K++)if(X[K].fn===J&&X[K].ctx===Y)return K;return!1},once:function(Q,J,Y){if(typeof Q==="object")for(var X in Q)this._on(X,Q[X],J,!0);else{Q=Q0(Q);for(var K=0,V=Q.length;K<V;K++)this._on(Q[K],J,Y,!0)}return this},addEventParent:function(Q){return this._eventParents=this._eventParents||{},this._eventParents[D(Q)]=Q,this},removeEventParent:function(Q){if(this._eventParents)delete this._eventParents[D(Q)];return this},_propagateEvent:function(Q){for(var J in this._eventParents)this._eventParents[J].fire(Q.type,I({layer:Q.target,propagatedFrom:Q.target},Q),!0)}};a.addEventListener=a.on,a.removeEventListener=a.clearAllEventListeners=a.off,a.addOneTimeEventListener=a.once,a.fireEvent=a.fire,a.hasEventListeners=a.listens;var j0=H0.extend(a);function N(Q,J,Y){this.x=Y?Math.round(Q):Q,this.y=Y?Math.round(J):J}var X5=Math.trunc||function(Q){return Q>0?Math.floor(Q):Math.ceil(Q)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(Q){return this.clone()._add(R(Q))},_add:function(Q){return this.x+=Q.x,this.y+=Q.y,this},subtract:function(Q){return this.clone()._subtract(R(Q))},_subtract:function(Q){return this.x-=Q.x,this.y-=Q.y,this},divideBy:function(Q){return this.clone()._divideBy(Q)},_divideBy:function(Q){return this.x/=Q,this.y/=Q,this},multiplyBy:function(Q){return this.clone()._multiplyBy(Q)},_multiplyBy:function(Q){return this.x*=Q,this.y*=Q,this},scaleBy:function(Q){return new N(this.x*Q.x,this.y*Q.y)},unscaleBy:function(Q){return new N(this.x/Q.x,this.y/Q.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X5(this.x),this.y=X5(this.y),this},distanceTo:function(Q){Q=R(Q);var J=Q.x-this.x,Y=Q.y-this.y;return Math.sqrt(J*J+Y*Y)},equals:function(Q){return Q=R(Q),Q.x===this.x&&Q.y===this.y},contains:function(Q){return Q=R(Q),Math.abs(Q.x)<=Math.abs(this.x)&&Math.abs(Q.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function R(Q,J,Y){if(Q instanceof N)return Q;if(J0(Q))return new N(Q[0],Q[1]);if(Q===void 0||Q===null)return Q;if(typeof Q==="object"&&"x"in Q&&"y"in Q)return new N(Q.x,Q.y);return new N(Q,J,Y)}function z(Q,J){if(!Q)return;var Y=J?[Q,J]:Q;for(var X=0,K=Y.length;X<K;X++)this.extend(Y[X])}z.prototype={extend:function(Q){var J,Y;if(!Q)return this;if(Q instanceof N||typeof Q[0]==="number"||"x"in Q)J=Y=R(Q);else if(Q=l(Q),J=Q.min,Y=Q.max,!J||!Y)return this;if(!this.min&&!this.max)this.min=J.clone(),this.max=Y.clone();else this.min.x=Math.min(J.x,this.min.x),this.max.x=Math.max(Y.x,this.max.x),this.min.y=Math.min(J.y,this.min.y),this.max.y=Math.max(Y.y,this.max.y);return this},getCenter:function(Q){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,Q)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(Q){var J,Y;if(typeof Q[0]==="number"||Q instanceof N)Q=R(Q);else Q=l(Q);if(Q instanceof z)J=Q.min,Y=Q.max;else J=Y=Q;return J.x>=this.min.x&&Y.x<=this.max.x&&J.y>=this.min.y&&Y.y<=this.max.y},intersects:function(Q){Q=l(Q);var J=this.min,Y=this.max,X=Q.min,K=Q.max,V=K.x>=J.x&&X.x<=Y.x,U=K.y>=J.y&&X.y<=Y.y;return V&&U},overlaps:function(Q){Q=l(Q);var J=this.min,Y=this.max,X=Q.min,K=Q.max,V=K.x>J.x&&X.x<Y.x,U=K.y>J.y&&X.y<Y.y;return V&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(Q){var J=this.min,Y=this.max,X=Math.abs(J.x-Y.x)*Q,K=Math.abs(J.y-Y.y)*Q;return l(R(J.x-X,J.y-K),R(Y.x+X,Y.y+K))},equals:function(Q){if(!Q)return!1;return Q=l(Q),this.min.equals(Q.getTopLeft())&&this.max.equals(Q.getBottomRight())}};function l(Q,J){if(!Q||Q instanceof z)return Q;return new z(Q,J)}function i(Q,J){if(!Q)return;var Y=J?[Q,J]:Q;for(var X=0,K=Y.length;X<K;X++)this.extend(Y[X])}i.prototype={extend:function(Q){var J=this._southWest,Y=this._northEast,X,K;if(Q instanceof S)X=Q,K=Q;else if(Q instanceof i){if(X=Q._southWest,K=Q._northEast,!X||!K)return this}else return Q?this.extend(k(Q)||v(Q)):this;if(!J&&!Y)this._southWest=new S(X.lat,X.lng),this._northEast=new S(K.lat,K.lng);else J.lat=Math.min(X.lat,J.lat),J.lng=Math.min(X.lng,J.lng),Y.lat=Math.max(K.lat,Y.lat),Y.lng=Math.max(K.lng,Y.lng);return this},pad:function(Q){var J=this._southWest,Y=this._northEast,X=Math.abs(J.lat-Y.lat)*Q,K=Math.abs(J.lng-Y.lng)*Q;return new i(new S(J.lat-X,J.lng-K),new S(Y.lat+X,Y.lng+K))},getCenter:function(){return new S((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new S(this.getNorth(),this.getWest())},getSouthEast:function(){return new S(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(Q){if(typeof Q[0]==="number"||Q instanceof S||"lat"in Q)Q=k(Q);else Q=v(Q);var J=this._southWest,Y=this._northEast,X,K;if(Q instanceof i)X=Q.getSouthWest(),K=Q.getNorthEast();else X=K=Q;return X.lat>=J.lat&&K.lat<=Y.lat&&X.lng>=J.lng&&K.lng<=Y.lng},intersects:function(Q){Q=v(Q);var J=this._southWest,Y=this._northEast,X=Q.getSouthWest(),K=Q.getNorthEast(),V=K.lat>=J.lat&&X.lat<=Y.lat,U=K.lng>=J.lng&&X.lng<=Y.lng;return V&&U},overlaps:function(Q){Q=v(Q);var J=this._southWest,Y=this._northEast,X=Q.getSouthWest(),K=Q.getNorthEast(),V=K.lat>J.lat&&X.lat<Y.lat,U=K.lng>J.lng&&X.lng<Y.lng;return V&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(Q,J){if(!Q)return!1;return Q=v(Q),this._southWest.equals(Q.getSouthWest(),J)&&this._northEast.equals(Q.getNorthEast(),J)},isValid:function(){return!!(this._southWest&&this._northEast)}};function v(Q,J){if(Q instanceof i)return Q;return new i(Q,J)}function S(Q,J,Y){if(isNaN(Q)||isNaN(J))throw Error("Invalid LatLng object: ("+Q+", "+J+")");if(this.lat=+Q,this.lng=+J,Y!==void 0)this.alt=+Y}S.prototype={equals:function(Q,J){if(!Q)return!1;Q=k(Q);var Y=Math.max(Math.abs(this.lat-Q.lat),Math.abs(this.lng-Q.lng));return Y<=(J===void 0?0.000000001:J)},toString:function(Q){return"LatLng("+u(this.lat,Q)+", "+u(this.lng,Q)+")"},distanceTo:function(Q){return Z0.distance(this,k(Q))},wrap:function(){return Z0.wrapLatLng(this)},toBounds:function(Q){var J=180*Q/40075017,Y=J/Math.cos(Math.PI/180*this.lat);return v([this.lat-J,this.lng-Y],[this.lat+J,this.lng+Y])},clone:function(){return new S(this.lat,this.lng,this.alt)}};function k(Q,J,Y){if(Q instanceof S)return Q;if(J0(Q)&&typeof Q[0]!=="object"){if(Q.length===3)return new S(Q[0],Q[1],Q[2]);if(Q.length===2)return new S(Q[0],Q[1]);return null}if(Q===void 0||Q===null)return Q;if(typeof Q==="object"&&"lat"in Q)return new S(Q.lat,"lng"in Q?Q.lng:Q.lon,Q.alt);if(J===void 0)return null;return new S(Q,J,Y)}var G0={latLngToPoint:function(Q,J){var Y=this.projection.project(Q),X=this.scale(J);return this.transformation._transform(Y,X)},pointToLatLng:function(Q,J){var Y=this.scale(J),X=this.transformation.untransform(Q,Y);return this.projection.unproject(X)},project:function(Q){return this.projection.project(Q)},unproject:function(Q){return this.projection.unproject(Q)},scale:function(Q){return 256*Math.pow(2,Q)},zoom:function(Q){return Math.log(Q/256)/Math.LN2},getProjectedBounds:function(Q){if(this.infinite)return null;var J=this.projection.bounds,Y=this.scale(Q),X=this.transformation.transform(J.min,Y),K=this.transformation.transform(J.max,Y);return new z(X,K)},infinite:!1,wrapLatLng:function(Q){var J=this.wrapLng?y(Q.lng,this.wrapLng,!0):Q.lng,Y=this.wrapLat?y(Q.lat,this.wrapLat,!0):Q.lat,X=Q.alt;return new S(Y,J,X)},wrapLatLngBounds:function(Q){var J=Q.getCenter(),Y=this.wrapLatLng(J),X=J.lat-Y.lat,K=J.lng-Y.lng;if(X===0&&K===0)return Q;var V=Q.getSouthWest(),U=Q.getNorthEast(),$=new S(V.lat-X,V.lng-K),W=new S(U.lat-X,U.lng-K);return new i($,W)}},Z0=I({},G0,{wrapLng:[-180,180],R:6371000,distance:function(Q,J){var Y=Math.PI/180,X=Q.lat*Y,K=J.lat*Y,V=Math.sin((J.lat-Q.lat)*Y/2),U=Math.sin((J.lng-Q.lng)*Y/2),$=V*V+Math.cos(X)*Math.cos(K)*U*U,W=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*W}}),K5=6378137,N1={R:K5,MAX_LATITUDE:85.0511287798,project:function(Q){var J=Math.PI/180,Y=this.MAX_LATITUDE,X=Math.max(Math.min(Y,Q.lat),-Y),K=Math.sin(X*J);return new N(this.R*Q.lng*J,this.R*Math.log((1+K)/(1-K))/2)},unproject:function(Q){var J=180/Math.PI;return new S((2*Math.atan(Math.exp(Q.y/this.R))-Math.PI/2)*J,Q.x*J/this.R)},bounds:function(){var Q=K5*Math.PI;return new z([-Q,-Q],[Q,Q])}()};function F1(Q,J,Y,X){if(J0(Q)){this._a=Q[0],this._b=Q[1],this._c=Q[2],this._d=Q[3];return}this._a=Q,this._b=J,this._c=Y,this._d=X}F1.prototype={transform:function(Q,J){return this._transform(Q.clone(),J)},_transform:function(Q,J){return J=J||1,Q.x=J*(this._a*Q.x+this._b),Q.y=J*(this._c*Q.y+this._d),Q},untransform:function(Q,J){return J=J||1,new N((Q.x/J-this._b)/this._a,(Q.y/J-this._d)/this._c)}};function v0(Q,J,Y,X){return new F1(Q,J,Y,X)}var D1=I({},Z0,{code:"EPSG:3857",projection:N1,transformation:function(){var Q=0.5/(Math.PI*N1.R);return v0(Q,0.5,-Q,0.5)}()}),D6=I({},D1,{code:"EPSG:900913"});function V5(Q){return document.createElementNS("http://www.w3.org/2000/svg",Q)}function U5(Q,J){var Y="",X,K,V,U,$,W;for(X=0,V=Q.length;X<V;X++){$=Q[X];for(K=0,U=$.length;K<U;K++)W=$[K],Y+=(K?"L":"M")+W.x+" "+W.y;Y+=J?E.svg?"z":"x":""}return Y||"M0 0"}var h1=document.documentElement.style,s0="ActiveXObject"in window,h6=s0&&!document.addEventListener,$5="msLaunchUri"in navigator&&!("documentMode"in document),T1=V0("webkit"),W5=V0("android"),H5=V0("android 2")||V0("android 3"),T6=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),k6=W5&&V0("Google")&&T6<537&&!("AudioNode"in window),k1=!!window.opera,G5=!$5&&V0("chrome"),q5=V0("gecko")&&!T1&&!k1&&!s0,_6=!G5&&V0("safari"),I5=V0("phantom"),E5="OTransition"in h1,O6=navigator.platform.indexOf("Win")===0,M5=s0&&"transition"in h1,_1="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!H5,Z5="MozPerspective"in h1,w6=!window.L_DISABLE_3D&&(M5||_1||Z5)&&!E5&&!I5,L0=typeof orientation<"u"||V0("mobile"),S6=L0&&T1,B6=L0&&_1,A5=!window.PointerEvent&&window.MSPointerEvent,R5=!!(window.PointerEvent||A5),N5="ontouchstart"in window||!!window.TouchEvent,C6=!window.L_NO_TOUCH&&(N5||R5),f6=L0&&k1,z6=L0&&q5,P6=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,j6=function(){var Q=!1;try{var J=Object.defineProperty({},"passive",{get:function(){Q=!0}});window.addEventListener("testPassiveEventSupport",w,J),window.removeEventListener("testPassiveEventSupport",w,J)}catch(Y){}return Q}(),v6=function(){return!!document.createElement("canvas").getContext}(),O1=!!(document.createElementNS&&V5("svg").createSVGRect),L6=!!O1&&function(){var Q=document.createElement("div");return Q.innerHTML="<svg/>",(Q.firstChild&&Q.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),x6=!O1&&function(){try{var Q=document.createElement("div");Q.innerHTML='<v:shape adj="1"/>';var J=Q.firstChild;return J.style.behavior="url(#default#VML)",J&&typeof J.adj==="object"}catch(Y){return!1}}(),b6=navigator.platform.indexOf("Mac")===0,u6=navigator.platform.indexOf("Linux")===0;function V0(Q){return navigator.userAgent.toLowerCase().indexOf(Q)>=0}var E={ie:s0,ielt9:h6,edge:$5,webkit:T1,android:W5,android23:H5,androidStock:k6,opera:k1,chrome:G5,gecko:q5,safari:_6,phantom:I5,opera12:E5,win:O6,ie3d:M5,webkit3d:_1,gecko3d:Z5,any3d:w6,mobile:L0,mobileWebkit:S6,mobileWebkit3d:B6,msPointer:A5,pointer:R5,touch:C6,touchNative:N5,mobileOpera:f6,mobileGecko:z6,retina:P6,passiveEvents:j6,canvas:v6,svg:O1,vml:x6,inlineSvg:L6,mac:b6,linux:u6},F5=E.msPointer?"MSPointerDown":"pointerdown",D5=E.msPointer?"MSPointerMove":"pointermove",h5=E.msPointer?"MSPointerUp":"pointerup",T5=E.msPointer?"MSPointerCancel":"pointercancel",w1={touchstart:F5,touchmove:D5,touchend:h5,touchcancel:T5},k5={touchstart:p6,touchmove:n0,touchend:n0,touchcancel:n0},_0={},_5=!1;function g6(Q,J,Y){if(J==="touchstart")d6();if(!k5[J])return console.warn("wrong event specified:",J),w;return Y=k5[J].bind(this,Y),Q.addEventListener(w1[J],Y,!1),Y}function c6(Q,J,Y){if(!w1[J]){console.warn("wrong event specified:",J);return}Q.removeEventListener(w1[J],Y,!1)}function y6(Q){_0[Q.pointerId]=Q}function m6(Q){if(_0[Q.pointerId])_0[Q.pointerId]=Q}function O5(Q){delete _0[Q.pointerId]}function d6(){if(!_5)document.addEventListener(F5,y6,!0),document.addEventListener(D5,m6,!0),document.addEventListener(h5,O5,!0),document.addEventListener(T5,O5,!0),_5=!0}function n0(Q,J){if(J.pointerType===(J.MSPOINTER_TYPE_MOUSE||"mouse"))return;J.touches=[];for(var Y in _0)J.touches.push(_0[Y]);J.changedTouches=[J],Q(J)}function p6(Q,J){if(J.MSPOINTER_TYPE_TOUCH&&J.pointerType===J.MSPOINTER_TYPE_TOUCH)c(J);n0(Q,J)}function l6(Q){var J={},Y,X;for(X in Q)Y=Q[X],J[X]=Y&&Y.bind?Y.bind(Q):Y;return Q=J,J.type="dblclick",J.detail=2,J.isTrusted=!1,J._simulated=!0,J}var i6=200;function r6(Q,J){Q.addEventListener("dblclick",J);var Y=0,X;function K(V){if(V.detail!==1){X=V.detail;return}if(V.pointerType==="mouse"||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents)return;var U=f5(V);if(U.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!U.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))return;var $=Date.now();if($-Y<=i6){if(X++,X===2)J(l6(V))}else X=1;Y=$}return Q.addEventListener("click",K),{dblclick:J,simDblclick:K}}function a6(Q,J){Q.removeEventListener("dblclick",J.dblclick),Q.removeEventListener("click",J.simDblclick)}var S1=e0(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),x0=e0(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),w5=x0==="webkitTransition"||x0==="OTransition"?x0+"End":"transitionend";function S5(Q){return typeof Q==="string"?document.getElementById(Q):Q}function b0(Q,J){var Y=Q.style[J]||Q.currentStyle&&Q.currentStyle[J];if((!Y||Y==="auto")&&document.defaultView){var X=document.defaultView.getComputedStyle(Q,null);Y=X?X[J]:null}return Y==="auto"?null:Y}function O(Q,J,Y){var X=document.createElement(Q);if(X.className=J||"",Y)Y.appendChild(X);return X}function P(Q){var J=Q.parentNode;if(J)J.removeChild(Q)}function t0(Q){while(Q.firstChild)Q.removeChild(Q.firstChild)}function O0(Q){var J=Q.parentNode;if(J&&J.lastChild!==Q)J.appendChild(Q)}function w0(Q){var J=Q.parentNode;if(J&&J.firstChild!==Q)J.insertBefore(Q,J.firstChild)}function B1(Q,J){if(Q.classList!==void 0)return Q.classList.contains(J);var Y=o0(Q);return Y.length>0&&new RegExp("(^|\\s)"+J+"(\\s|$)").test(Y)}function h(Q,J){if(Q.classList!==void 0){var Y=Q0(J);for(var X=0,K=Y.length;X<K;X++)Q.classList.add(Y[X])}else if(!B1(Q,J)){var V=o0(Q);C1(Q,(V?V+" ":"")+J)}}function j(Q,J){if(Q.classList!==void 0)Q.classList.remove(J);else C1(Q,K0((" "+o0(Q)+" ").replace(" "+J+" "," ")))}function C1(Q,J){if(Q.className.baseVal===void 0)Q.className=J;else Q.className.baseVal=J}function o0(Q){if(Q.correspondingElement)Q=Q.correspondingElement;return Q.className.baseVal===void 0?Q.className:Q.className.baseVal}function t(Q,J){if("opacity"in Q.style)Q.style.opacity=J;else if("filter"in Q.style)s6(Q,J)}function s6(Q,J){var Y=!1,X="DXImageTransform.Microsoft.Alpha";try{Y=Q.filters.item(X)}catch(K){if(J===1)return}if(J=Math.round(J*100),Y)Y.Enabled=J!==100,Y.Opacity=J;else Q.style.filter+=" progid:"+X+"(opacity="+J+")"}function e0(Q){var J=document.documentElement.style;for(var Y=0;Y<Q.length;Y++)if(Q[Y]in J)return Q[Y];return!1}function F0(Q,J,Y){var X=J||new N(0,0);Q.style[S1]=(E.ie3d?"translate("+X.x+"px,"+X.y+"px)":"translate3d("+X.x+"px,"+X.y+"px,0)")+(Y?" scale("+Y+")":"")}function x(Q,J){if(Q._leaflet_pos=J,E.any3d)F0(Q,J);else Q.style.left=J.x+"px",Q.style.top=J.y+"px"}function D0(Q){return Q._leaflet_pos||new N(0,0)}var u0,g0,f1;if("onselectstart"in document)u0=function(){F(window,"selectstart",c)},g0=function(){C(window,"selectstart",c)};else{var c0=e0(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);u0=function(){if(c0){var Q=document.documentElement.style;f1=Q[c0],Q[c0]="none"}},g0=function(){if(c0)document.documentElement.style[c0]=f1,f1=void 0}}function z1(){F(window,"dragstart",c)}function P1(){C(window,"dragstart",c)}var Q1,j1;function v1(Q){while(Q.tabIndex===-1)Q=Q.parentNode;if(!Q.style)return;J1(),Q1=Q,j1=Q.style.outlineStyle,Q.style.outlineStyle="none",F(window,"keydown",J1)}function J1(){if(!Q1)return;Q1.style.outlineStyle=j1,Q1=void 0,j1=void 0,C(window,"keydown",J1)}function B5(Q){do Q=Q.parentNode;while((!Q.offsetWidth||!Q.offsetHeight)&&Q!==document.body);return Q}function L1(Q){var J=Q.getBoundingClientRect();return{x:J.width/Q.offsetWidth||1,y:J.height/Q.offsetHeight||1,boundingClientRect:J}}var n6={__proto__:null,TRANSFORM:S1,TRANSITION:x0,TRANSITION_END:w5,get:S5,getStyle:b0,create:O,remove:P,empty:t0,toFront:O0,toBack:w0,hasClass:B1,addClass:h,removeClass:j,setClass:C1,getClass:o0,setOpacity:t,testProp:e0,setTransform:F0,setPosition:x,getPosition:D0,get disableTextSelection(){return u0},get enableTextSelection(){return g0},disableImageDrag:z1,enableImageDrag:P1,preventOutline:v1,restoreOutline:J1,getSizedParentNode:B5,getScale:L1};function F(Q,J,Y,X){if(J&&typeof J==="object")for(var K in J)b1(Q,K,J[K],Y);else{J=Q0(J);for(var V=0,U=J.length;V<U;V++)b1(Q,J[V],Y,X)}return this}var U0="_leaflet_events";function C(Q,J,Y,X){if(arguments.length===1)C5(Q),delete Q[U0];else if(J&&typeof J==="object")for(var K in J)u1(Q,K,J[K],Y);else if(J=Q0(J),arguments.length===2)C5(Q,function($){return Z1(J,$)!==-1});else for(var V=0,U=J.length;V<U;V++)u1(Q,J[V],Y,X);return this}function C5(Q,J){for(var Y in Q[U0]){var X=Y.split(/\d/)[0];if(!J||J(X))u1(Q,X,null,null,Y)}}var x1={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function b1(Q,J,Y,X){var K=J+D(Y)+(X?"_"+D(X):"");if(Q[U0]&&Q[U0][K])return this;var V=function($){return Y.call(X||Q,$||window.event)},U=V;if(!E.touchNative&&E.pointer&&J.indexOf("touch")===0)V=g6(Q,J,V);else if(E.touch&&J==="dblclick")V=r6(Q,V);else if("addEventListener"in Q)if(J==="touchstart"||J==="touchmove"||J==="wheel"||J==="mousewheel")Q.addEventListener(x1[J]||J,V,E.passiveEvents?{passive:!1}:!1);else if(J==="mouseenter"||J==="mouseleave")V=function($){if($=$||window.event,c1(Q,$))U($)},Q.addEventListener(x1[J],V,!1);else Q.addEventListener(J,U,!1);else Q.attachEvent("on"+J,V);Q[U0]=Q[U0]||{},Q[U0][K]=V}function u1(Q,J,Y,X,K){K=K||J+D(Y)+(X?"_"+D(X):"");var V=Q[U0]&&Q[U0][K];if(!V)return this;if(!E.touchNative&&E.pointer&&J.indexOf("touch")===0)c6(Q,J,V);else if(E.touch&&J==="dblclick")a6(Q,V);else if("removeEventListener"in Q)Q.removeEventListener(x1[J]||J,V,!1);else Q.detachEvent("on"+J,V);Q[U0][K]=null}function h0(Q){if(Q.stopPropagation)Q.stopPropagation();else if(Q.originalEvent)Q.originalEvent._stopped=!0;else Q.cancelBubble=!0;return this}function g1(Q){return b1(Q,"wheel",h0),this}function y0(Q){return F(Q,"mousedown touchstart dblclick contextmenu",h0),Q._leaflet_disable_click=!0,this}function c(Q){if(Q.preventDefault)Q.preventDefault();else Q.returnValue=!1;return this}function T0(Q){return c(Q),h0(Q),this}function f5(Q){if(Q.composedPath)return Q.composedPath();var J=[],Y=Q.target;while(Y)J.push(Y),Y=Y.parentNode;return J}function z5(Q,J){if(!J)return new N(Q.clientX,Q.clientY);var Y=L1(J),X=Y.boundingClientRect;return new N((Q.clientX-X.left)/Y.x-J.clientLeft,(Q.clientY-X.top)/Y.y-J.clientTop)}var t6=E.linux&&E.chrome?window.devicePixelRatio:E.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function P5(Q){return E.edge?Q.wheelDeltaY/2:Q.deltaY&&Q.deltaMode===0?-Q.deltaY/t6:Q.deltaY&&Q.deltaMode===1?-Q.deltaY*20:Q.deltaY&&Q.deltaMode===2?-Q.deltaY*60:Q.deltaX||Q.deltaZ?0:Q.wheelDelta?(Q.wheelDeltaY||Q.wheelDelta)/2:Q.detail&&Math.abs(Q.detail)<32765?-Q.detail*20:Q.detail?Q.detail/-32765*60:0}function c1(Q,J){var Y=J.relatedTarget;if(!Y)return!0;try{while(Y&&Y!==Q)Y=Y.parentNode}catch(X){return!1}return Y!==Q}var o6={__proto__:null,on:F,off:C,stopPropagation:h0,disableScrollPropagation:g1,disableClickPropagation:y0,preventDefault:c,stop:T0,getPropagationPath:f5,getMousePosition:z5,getWheelDelta:P5,isExternalTarget:c1,addListener:F,removeListener:C},j5=j0.extend({run:function(Q,J,Y,X){this.stop(),this._el=Q,this._inProgress=!0,this._duration=Y||0.25,this._easeOutPower=1/Math.max(X||0.5,0.2),this._startPos=D0(Q),this._offset=J.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){if(!this._inProgress)return;this._step(!0),this._complete()},_animate:function(){this._animId=p(this._animate,this),this._step()},_step:function(Q){var J=+new Date-this._startTime,Y=this._duration*1000;if(J<Y)this._runFrame(this._easeOut(J/Y),Q);else this._runFrame(1),this._complete()},_runFrame:function(Q,J){var Y=this._startPos.add(this._offset.multiplyBy(Q));if(J)Y._round();x(this._el,Y),this.fire("step")},_complete:function(){n(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(Q){return 1-Math.pow(1-Q,this._easeOutPower)}}),_=j0.extend({options:{crs:D1,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(Q,J){if(J=f(this,J),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(Q),this._initLayout(),this._onResize=A(this._onResize,this),this._initEvents(),J.maxBounds)this.setMaxBounds(J.maxBounds);if(J.zoom!==void 0)this._zoom=this._limitZoom(J.zoom);if(J.center&&J.zoom!==void 0)this.setView(k(J.center),J.zoom,{reset:!0});if(this.callInitHooks(),this._zoomAnimated=x0&&E.any3d&&!E.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated)this._createAnimProxy(),F(this._proxy,w5,this._catchTransitionEnd,this);this._addLayers(this.options.layers)},setView:function(Q,J,Y){if(J=J===void 0?this._zoom:this._limitZoom(J),Q=this._limitCenter(k(Q),J,this.options.maxBounds),Y=Y||{},this._stop(),this._loaded&&!Y.reset&&Y!==!0){if(Y.animate!==void 0)Y.zoom=I({animate:Y.animate},Y.zoom),Y.pan=I({animate:Y.animate,duration:Y.duration},Y.pan);var X=this._zoom!==J?this._tryAnimatedZoom&&this._tryAnimatedZoom(Q,J,Y.zoom):this._tryAnimatedPan(Q,Y.pan);if(X)return clearTimeout(this._sizeTimer),this}return this._resetView(Q,J,Y.pan&&Y.pan.noMoveStart),this},setZoom:function(Q,J){if(!this._loaded)return this._zoom=Q,this;return this.setView(this.getCenter(),Q,{zoom:J})},zoomIn:function(Q,J){return Q=Q||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+Q,J)},zoomOut:function(Q,J){return Q=Q||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-Q,J)},setZoomAround:function(Q,J,Y){var X=this.getZoomScale(J),K=this.getSize().divideBy(2),V=Q instanceof N?Q:this.latLngToContainerPoint(Q),U=V.subtract(K).multiplyBy(1-1/X),$=this.containerPointToLatLng(K.add(U));return this.setView($,J,{zoom:Y})},_getBoundsCenterZoom:function(Q,J){J=J||{},Q=Q.getBounds?Q.getBounds():v(Q);var Y=R(J.paddingTopLeft||J.padding||[0,0]),X=R(J.paddingBottomRight||J.padding||[0,0]),K=this.getBoundsZoom(Q,!1,Y.add(X));if(K=typeof J.maxZoom==="number"?Math.min(J.maxZoom,K):K,K===1/0)return{center:Q.getCenter(),zoom:K};var V=X.subtract(Y).divideBy(2),U=this.project(Q.getSouthWest(),K),$=this.project(Q.getNorthEast(),K),W=this.unproject(U.add($).divideBy(2).add(V),K);return{center:W,zoom:K}},fitBounds:function(Q,J){if(Q=v(Q),!Q.isValid())throw Error("Bounds are not valid.");var Y=this._getBoundsCenterZoom(Q,J);return this.setView(Y.center,Y.zoom,J)},fitWorld:function(Q){return this.fitBounds([[-90,-180],[90,180]],Q)},panTo:function(Q,J){return this.setView(Q,this._zoom,{pan:J})},panBy:function(Q,J){if(Q=R(Q).round(),J=J||{},!Q.x&&!Q.y)return this.fire("moveend");if(J.animate!==!0&&!this.getSize().contains(Q))return this._resetView(this.unproject(this.project(this.getCenter()).add(Q)),this.getZoom()),this;if(!this._panAnim)this._panAnim=new j5,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this);if(!J.noMoveStart)this.fire("movestart");if(J.animate!==!1){h(this._mapPane,"leaflet-pan-anim");var Y=this._getMapPanePos().subtract(Q).round();this._panAnim.run(this._mapPane,Y,J.duration||0.25,J.easeLinearity)}else this._rawPanBy(Q),this.fire("move").fire("moveend");return this},flyTo:function(Q,J,Y){if(Y=Y||{},Y.animate===!1||!E.any3d)return this.setView(Q,J,Y);this._stop();var X=this.project(this.getCenter()),K=this.project(Q),V=this.getSize(),U=this._zoom;Q=k(Q),J=J===void 0?U:J;var $=Math.max(V.x,V.y),W=$*this.getZoomScale(U,J),G=K.distanceTo(X)||1,q=1.42,Z=q*q;function T(b){var E1=b?-1:1,c7=b?W:$,y7=W*W-$*$+E1*Z*Z*G*G,m7=2*c7*Z*G,t1=y7/m7,E6=Math.sqrt(t1*t1+1)-t1,d7=E6<0.000000001?-18:Math.log(E6);return d7}function m(b){return(Math.exp(b)-Math.exp(-b))/2}function g(b){return(Math.exp(b)+Math.exp(-b))/2}function e(b){return m(b)/g(b)}var r=T(0);function P0(b){return $*(g(r)/g(r+q*b))}function x7(b){return $*(g(r)*e(r+q*b)-m(r))/Z}function b7(b){return 1-Math.pow(1-b,1.5)}var u7=Date.now(),q6=(T(1)-r)/q,g7=Y.duration?1000*Y.duration:1000*q6*0.8;function I6(){var b=(Date.now()-u7)/g7,E1=b7(b)*q6;if(b<=1)this._flyToFrame=p(I6,this),this._move(this.unproject(X.add(K.subtract(X).multiplyBy(x7(E1)/G)),U),this.getScaleZoom($/P0(E1),U),{flyTo:!0});else this._move(Q,J)._moveEnd(!0)}return this._moveStart(!0,Y.noMoveStart),I6.call(this),this},flyToBounds:function(Q,J){var Y=this._getBoundsCenterZoom(Q,J);return this.flyTo(Y.center,Y.zoom,J)},setMaxBounds:function(Q){if(Q=v(Q),this.listens("moveend",this._panInsideMaxBounds))this.off("moveend",this._panInsideMaxBounds);if(!Q.isValid())return this.options.maxBounds=null,this;if(this.options.maxBounds=Q,this._loaded)this._panInsideMaxBounds();return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(Q){var J=this.options.minZoom;if(this.options.minZoom=Q,this._loaded&&J!==Q){if(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)return this.setZoom(Q)}return this},setMaxZoom:function(Q){var J=this.options.maxZoom;if(this.options.maxZoom=Q,this._loaded&&J!==Q){if(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)return this.setZoom(Q)}return this},panInsideBounds:function(Q,J){this._enforcingBounds=!0;var Y=this.getCenter(),X=this._limitCenter(Y,this._zoom,v(Q));if(!Y.equals(X))this.panTo(X,J);return this._enforcingBounds=!1,this},panInside:function(Q,J){J=J||{};var Y=R(J.paddingTopLeft||J.padding||[0,0]),X=R(J.paddingBottomRight||J.padding||[0,0]),K=this.project(this.getCenter()),V=this.project(Q),U=this.getPixelBounds(),$=l([U.min.add(Y),U.max.subtract(X)]),W=$.getSize();if(!$.contains(V)){this._enforcingBounds=!0;var G=V.subtract($.getCenter()),q=$.extend(V).getSize().subtract(W);K.x+=G.x<0?-q.x:q.x,K.y+=G.y<0?-q.y:q.y,this.panTo(this.unproject(K),J),this._enforcingBounds=!1}return this},invalidateSize:function(Q){if(!this._loaded)return this;Q=I({animate:!1,pan:!0},Q===!0?{animate:!0}:Q);var J=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var Y=this.getSize(),X=J.divideBy(2).round(),K=Y.divideBy(2).round(),V=X.subtract(K);if(!V.x&&!V.y)return this;if(Q.animate&&Q.pan)this.panBy(V);else{if(Q.pan)this._rawPanBy(V);if(this.fire("move"),Q.debounceMoveend)clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(A(this.fire,this,"moveend"),200);else this.fire("moveend")}return this.fire("resize",{oldSize:J,newSize:Y})},stop:function(){if(this.setZoom(this._limitZoom(this._zoom)),!this.options.zoomSnap)this.fire("viewreset");return this._stop()},locate:function(Q){if(Q=this._locateOptions=I({timeout:1e4,watch:!1},Q),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var J=A(this._handleGeolocationResponse,this),Y=A(this._handleGeolocationError,this);if(Q.watch)this._locationWatchId=navigator.geolocation.watchPosition(J,Y,Q);else navigator.geolocation.getCurrentPosition(J,Y,Q);return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch)navigator.geolocation.clearWatch(this._locationWatchId);if(this._locateOptions)this._locateOptions.setView=!1;return this},_handleGeolocationError:function(Q){if(!this._container._leaflet_id)return;var J=Q.code,Y=Q.message||(J===1?"permission denied":J===2?"position unavailable":"timeout");if(this._locateOptions.setView&&!this._loaded)this.fitWorld();this.fire("locationerror",{code:J,message:"Geolocation error: "+Y+"."})},_handleGeolocationResponse:function(Q){if(!this._container._leaflet_id)return;var J=Q.coords.latitude,Y=Q.coords.longitude,X=new S(J,Y),K=X.toBounds(Q.coords.accuracy*2),V=this._locateOptions;if(V.setView){var U=this.getBoundsZoom(K);this.setView(X,V.maxZoom?Math.min(U,V.maxZoom):U)}var $={latlng:X,bounds:K,timestamp:Q.timestamp};for(var W in Q.coords)if(typeof Q.coords[W]==="number")$[W]=Q.coords[W];this.fire("locationfound",$)},addHandler:function(Q,J){if(!J)return this;var Y=this[Q]=new J(this);if(this._handlers.push(Y),this.options[Q])Y.enable();return this},remove:function(){if(this._initEvents(!0),this.options.maxBounds)this.off("moveend",this._panInsideMaxBounds);if(this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(J){this._container._leaflet_id=void 0,this._containerId=void 0}if(this._locationWatchId!==void 0)this.stopLocate();if(this._stop(),P(this._mapPane),this._clearControlPos)this._clearControlPos();if(this._resizeRequest)n(this._resizeRequest),this._resizeRequest=null;if(this._clearHandlers(),this._loaded)this.fire("unload");var Q;for(Q in this._layers)this._layers[Q].remove();for(Q in this._panes)P(this._panes[Q]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(Q,J){var Y="leaflet-pane"+(Q?" leaflet-"+Q.replace("Pane","")+"-pane":""),X=O("div",Y,J||this._mapPane);if(Q)this._panes[Q]=X;return X},getCenter:function(){if(this._checkIfLoaded(),this._lastCenter&&!this._moved())return this._lastCenter.clone();return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var Q=this.getPixelBounds(),J=this.unproject(Q.getBottomLeft()),Y=this.unproject(Q.getTopRight());return new i(J,Y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(Q,J,Y){Q=v(Q),Y=R(Y||[0,0]);var X=this.getZoom()||0,K=this.getMinZoom(),V=this.getMaxZoom(),U=Q.getNorthWest(),$=Q.getSouthEast(),W=this.getSize().subtract(Y),G=l(this.project($,X),this.project(U,X)).getSize(),q=E.any3d?this.options.zoomSnap:1,Z=W.x/G.x,T=W.y/G.y,m=J?Math.max(Z,T):Math.min(Z,T);if(X=this.getScaleZoom(m,X),q)X=Math.round(X/(q/100))*(q/100),X=J?Math.ceil(X/q)*q:Math.floor(X/q)*q;return Math.max(K,Math.min(V,X))},getSize:function(){if(!this._size||this._sizeChanged)this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1;return this._size.clone()},getPixelBounds:function(Q,J){var Y=this._getTopLeftPoint(Q,J);return new z(Y,Y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(Q){return this.options.crs.getProjectedBounds(Q===void 0?this.getZoom():Q)},getPane:function(Q){return typeof Q==="string"?this._panes[Q]:Q},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(Q,J){var Y=this.options.crs;return J=J===void 0?this._zoom:J,Y.scale(Q)/Y.scale(J)},getScaleZoom:function(Q,J){var Y=this.options.crs;J=J===void 0?this._zoom:J;var X=Y.zoom(Q*Y.scale(J));return isNaN(X)?1/0:X},project:function(Q,J){return J=J===void 0?this._zoom:J,this.options.crs.latLngToPoint(k(Q),J)},unproject:function(Q,J){return J=J===void 0?this._zoom:J,this.options.crs.pointToLatLng(R(Q),J)},layerPointToLatLng:function(Q){var J=R(Q).add(this.getPixelOrigin());return this.unproject(J)},latLngToLayerPoint:function(Q){var J=this.project(k(Q))._round();return J._subtract(this.getPixelOrigin())},wrapLatLng:function(Q){return this.options.crs.wrapLatLng(k(Q))},wrapLatLngBounds:function(Q){return this.options.crs.wrapLatLngBounds(v(Q))},distance:function(Q,J){return this.options.crs.distance(k(Q),k(J))},containerPointToLayerPoint:function(Q){return R(Q).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(Q){return R(Q).add(this._getMapPanePos())},containerPointToLatLng:function(Q){var J=this.containerPointToLayerPoint(R(Q));return this.layerPointToLatLng(J)},latLngToContainerPoint:function(Q){return this.layerPointToContainerPoint(this.latLngToLayerPoint(k(Q)))},mouseEventToContainerPoint:function(Q){return z5(Q,this._container)},mouseEventToLayerPoint:function(Q){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(Q))},mouseEventToLatLng:function(Q){return this.layerPointToLatLng(this.mouseEventToLayerPoint(Q))},_initContainer:function(Q){var J=this._container=S5(Q);if(!J)throw Error("Map container not found.");else if(J._leaflet_id)throw Error("Map container is already initialized.");F(J,"scroll",this._onScroll,this),this._containerId=D(J)},_initLayout:function(){var Q=this._container;this._fadeAnimated=this.options.fadeAnimation&&E.any3d,h(Q,"leaflet-container"+(E.touch?" leaflet-touch":"")+(E.retina?" leaflet-retina":"")+(E.ielt9?" leaflet-oldie":"")+(E.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var J=b0(Q,"position");if(J!=="absolute"&&J!=="relative"&&J!=="fixed"&&J!=="sticky")Q.style.position="relative";if(this._initPanes(),this._initControlPos)this._initControlPos()},_initPanes:function(){var Q=this._panes={};if(this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),x(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),!this.options.markerZoomAnimation)h(Q.markerPane,"leaflet-zoom-hide"),h(Q.shadowPane,"leaflet-zoom-hide")},_resetView:function(Q,J,Y){x(this._mapPane,new N(0,0));var X=!this._loaded;this._loaded=!0,J=this._limitZoom(J),this.fire("viewprereset");var K=this._zoom!==J;if(this._moveStart(K,Y)._move(Q,J)._moveEnd(K),this.fire("viewreset"),X)this.fire("load")},_moveStart:function(Q,J){if(Q)this.fire("zoomstart");if(!J)this.fire("movestart");return this},_move:function(Q,J,Y,X){if(J===void 0)J=this._zoom;var K=this._zoom!==J;if(this._zoom=J,this._lastCenter=Q,this._pixelOrigin=this._getNewPixelOrigin(Q),!X){if(K||Y&&Y.pinch)this.fire("zoom",Y);this.fire("move",Y)}else if(Y&&Y.pinch)this.fire("zoom",Y);return this},_moveEnd:function(Q){if(Q)this.fire("zoomend");return this.fire("moveend")},_stop:function(){if(n(this._flyToFrame),this._panAnim)this._panAnim.stop();return this},_rawPanBy:function(Q){x(this._mapPane,this._getMapPanePos().subtract(Q))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds)this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(Q){this._targets={},this._targets[D(this._container)]=this;var J=Q?C:F;if(J(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize)J(window,"resize",this._onResize,this);if(E.any3d&&this.options.transform3DLimit)(Q?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){n(this._resizeRequest),this._resizeRequest=p(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var Q=this._getMapPanePos();if(Math.max(Math.abs(Q.x),Math.abs(Q.y))>=this.options.transform3DLimit)this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(Q,J){var Y=[],X,K=J==="mouseout"||J==="mouseover",V=Q.target||Q.srcElement,U=!1;while(V){if(X=this._targets[D(V)],X&&(J==="click"||J==="preclick")&&this._draggableMoved(X)){U=!0;break}if(X&&X.listens(J,!0)){if(K&&!c1(V,Q))break;if(Y.push(X),K)break}if(V===this._container)break;V=V.parentNode}if(!Y.length&&!U&&!K&&this.listens(J,!0))Y=[this];return Y},_isClickDisabled:function(Q){while(Q&&Q!==this._container){if(Q._leaflet_disable_click)return!0;Q=Q.parentNode}},_handleDOMEvent:function(Q){var J=Q.target||Q.srcElement;if(!this._loaded||J._leaflet_disable_events||Q.type==="click"&&this._isClickDisabled(J))return;var Y=Q.type;if(Y==="mousedown")v1(J);this._fireDOMEvent(Q,Y)},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(Q,J,Y){if(Q.type==="click"){var X=I({},Q);X.type="preclick",this._fireDOMEvent(X,X.type,Y)}var K=this._findEventTargets(Q,J);if(Y){var V=[];for(var U=0;U<Y.length;U++)if(Y[U].listens(J,!0))V.push(Y[U]);K=V.concat(K)}if(!K.length)return;if(J==="contextmenu")c(Q);var $=K[0],W={originalEvent:Q};if(Q.type!=="keypress"&&Q.type!=="keydown"&&Q.type!=="keyup"){var G=$.getLatLng&&(!$._radius||$._radius<=10);W.containerPoint=G?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(Q),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=G?$.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(U=0;U<K.length;U++)if(K[U].fire(J,W,!0),W.originalEvent._stopped||K[U].options.bubblingMouseEvents===!1&&Z1(this._mouseEvents,J)!==-1)return},_draggableMoved:function(Q){return Q=Q.dragging&&Q.dragging.enabled()?Q:this,Q.dragging&&Q.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var Q=0,J=this._handlers.length;Q<J;Q++)this._handlers[Q].disable()},whenReady:function(Q,J){if(this._loaded)Q.call(J||this,{target:this});else this.on("load",Q,J);return this},_getMapPanePos:function(){return D0(this._mapPane)||new N(0,0)},_moved:function(){var Q=this._getMapPanePos();return Q&&!Q.equals([0,0])},_getTopLeftPoint:function(Q,J){var Y=Q&&J!==void 0?this._getNewPixelOrigin(Q,J):this.getPixelOrigin();return Y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(Q,J){var Y=this.getSize()._divideBy(2);return this.project(Q,J)._subtract(Y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(Q,J,Y){var X=this._getNewPixelOrigin(Y,J);return this.project(Q,J)._subtract(X)},_latLngBoundsToNewLayerBounds:function(Q,J,Y){var X=this._getNewPixelOrigin(Y,J);return l([this.project(Q.getSouthWest(),J)._subtract(X),this.project(Q.getNorthWest(),J)._subtract(X),this.project(Q.getSouthEast(),J)._subtract(X),this.project(Q.getNorthEast(),J)._subtract(X)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(Q){return this.latLngToLayerPoint(Q).subtract(this._getCenterLayerPoint())},_limitCenter:function(Q,J,Y){if(!Y)return Q;var X=this.project(Q,J),K=this.getSize().divideBy(2),V=new z(X.subtract(K),X.add(K)),U=this._getBoundsOffset(V,Y,J);if(Math.abs(U.x)<=1&&Math.abs(U.y)<=1)return Q;return this.unproject(X.add(U),J)},_limitOffset:function(Q,J){if(!J)return Q;var Y=this.getPixelBounds(),X=new z(Y.min.add(Q),Y.max.add(Q));return Q.add(this._getBoundsOffset(X,J))},_getBoundsOffset:function(Q,J,Y){var X=l(this.project(J.getNorthEast(),Y),this.project(J.getSouthWest(),Y)),K=X.min.subtract(Q.min),V=X.max.subtract(Q.max),U=this._rebound(K.x,-V.x),$=this._rebound(K.y,-V.y);return new N(U,$)},_rebound:function(Q,J){return Q+J>0?Math.round(Q-J)/2:Math.max(0,Math.ceil(Q))-Math.max(0,Math.floor(J))},_limitZoom:function(Q){var J=this.getMinZoom(),Y=this.getMaxZoom(),X=E.any3d?this.options.zoomSnap:1;if(X)Q=Math.round(Q/X)*X;return Math.max(J,Math.min(Y,Q))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){j(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(Q,J){var Y=this._getCenterOffset(Q)._trunc();if((J&&J.animate)!==!0&&!this.getSize().contains(Y))return!1;return this.panBy(Y,J),!0},_createAnimProxy:function(){var Q=this._proxy=O("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(Q),this.on("zoomanim",function(J){var Y=S1,X=this._proxy.style[Y];if(F0(this._proxy,this.project(J.center,J.zoom),this.getZoomScale(J.zoom,1)),X===this._proxy.style[Y]&&this._animatingZoom)this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){P(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var Q=this.getCenter(),J=this.getZoom();F0(this._proxy,this.project(Q,J),this.getZoomScale(J,1))},_catchTransitionEnd:function(Q){if(this._animatingZoom&&Q.propertyName.indexOf("transform")>=0)this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(Q,J,Y){if(this._animatingZoom)return!0;if(Y=Y||{},!this._zoomAnimated||Y.animate===!1||this._nothingToAnimate()||Math.abs(J-this._zoom)>this.options.zoomAnimationThreshold)return!1;var X=this.getZoomScale(J),K=this._getCenterOffset(Q)._divideBy(1-1/X);if(Y.animate!==!0&&!this.getSize().contains(K))return!1;return p(function(){this._moveStart(!0,Y.noMoveStart||!1)._animateZoom(Q,J,!0)},this),!0},_animateZoom:function(Q,J,Y,X){if(!this._mapPane)return;if(Y)this._animatingZoom=!0,this._animateToCenter=Q,this._animateToZoom=J,h(this._mapPane,"leaflet-zoom-anim");if(this.fire("zoomanim",{center:Q,zoom:J,noUpdate:X}),!this._tempFireZoomEvent)this._tempFireZoomEvent=this._zoom!==this._animateToZoom;this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(A(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom)return;if(this._mapPane)j(this._mapPane,"leaflet-zoom-anim");if(this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent)this.fire("zoom");delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0)}});function e6(Q,J){return new _(Q,J)}var Y0=H0.extend({options:{position:"topright"},initialize:function(Q){f(this,Q)},getPosition:function(){return this.options.position},setPosition:function(Q){var J=this._map;if(J)J.removeControl(this);if(this.options.position=Q,J)J.addControl(this);return this},getContainer:function(){return this._container},addTo:function(Q){this.remove(),this._map=Q;var J=this._container=this.onAdd(Q),Y=this.getPosition(),X=Q._controlCorners[Y];if(h(J,"leaflet-control"),Y.indexOf("bottom")!==-1)X.insertBefore(J,X.firstChild);else X.appendChild(J);return this._map.on("unload",this.remove,this),this},remove:function(){if(!this._map)return this;if(P(this._container),this.onRemove)this.onRemove(this._map);return this._map.off("unload",this.remove,this),this._map=null,this},_refocusOnMap:function(Q){if(this._map&&Q&&Q.screenX>0&&Q.screenY>0)this._map.getContainer().focus()}}),m0=function(Q){return new Y0(Q)};_.include({addControl:function(Q){return Q.addTo(this),this},removeControl:function(Q){return Q.remove(),this},_initControlPos:function(){var Q=this._controlCorners={},J="leaflet-",Y=this._controlContainer=O("div",J+"control-container",this._container);function X(K,V){var U=J+K+" "+J+V;Q[K+V]=O("div",U,Y)}X("top","left"),X("top","right"),X("bottom","left"),X("bottom","right")},_clearControlPos:function(){for(var Q in this._controlCorners)P(this._controlCorners[Q]);P(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var v5=Y0.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(Q,J,Y,X){return Y<X?-1:X<Y?1:0}},initialize:function(Q,J,Y){f(this,Y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var X in Q)this._addLayer(Q[X],X);for(X in J)this._addLayer(J[X],X,!0)},onAdd:function(Q){this._initLayout(),this._update(),this._map=Q,Q.on("zoomend",this._checkDisabledLayers,this);for(var J=0;J<this._layers.length;J++)this._layers[J].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(Q){return Y0.prototype.addTo.call(this,Q),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var Q=0;Q<this._layers.length;Q++)this._layers[Q].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(Q,J){return this._addLayer(Q,J),this._map?this._update():this},addOverlay:function(Q,J){return this._addLayer(Q,J,!0),this._map?this._update():this},removeLayer:function(Q){Q.off("add remove",this._onLayerChange,this);var J=this._getLayer(D(Q));if(J)this._layers.splice(this._layers.indexOf(J),1);return this._map?this._update():this},expand:function(){h(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var Q=this._map.getSize().y-(this._container.offsetTop+50);if(Q<this._section.clientHeight)h(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=Q+"px";else j(this._section,"leaflet-control-layers-scrollbar");return this._checkDisabledLayers(),this},collapse:function(){return j(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var Q="leaflet-control-layers",J=this._container=O("div",Q),Y=this.options.collapsed;J.setAttribute("aria-haspopup",!0),y0(J),g1(J);var X=this._section=O("section",Q+"-list");if(Y)this._map.on("click",this.collapse,this),F(J,{mouseenter:this._expandSafely,mouseleave:this.collapse},this);var K=this._layersLink=O("a",Q+"-toggle",J);if(K.href="#",K.title="Layers",K.setAttribute("role","button"),F(K,{keydown:function(V){if(V.keyCode===13)this._expandSafely()},click:function(V){c(V),this._expandSafely()}},this),!Y)this.expand();this._baseLayersList=O("div",Q+"-base",X),this._separator=O("div",Q+"-separator",X),this._overlaysList=O("div",Q+"-overlays",X),J.appendChild(X)},_getLayer:function(Q){for(var J=0;J<this._layers.length;J++)if(this._layers[J]&&D(this._layers[J].layer)===Q)return this._layers[J]},_addLayer:function(Q,J,Y){if(this._map)Q.on("add remove",this._onLayerChange,this);if(this._layers.push({layer:Q,name:J,overlay:Y}),this.options.sortLayers)this._layers.sort(A(function(X,K){return this.options.sortFunction(X.layer,K.layer,X.name,K.name)},this));if(this.options.autoZIndex&&Q.setZIndex)this._lastZIndex++,Q.setZIndex(this._lastZIndex);this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;t0(this._baseLayersList),t0(this._overlaysList),this._layerControlInputs=[];var Q,J,Y,X,K=0;for(Y=0;Y<this._layers.length;Y++)X=this._layers[Y],this._addItem(X),J=J||X.overlay,Q=Q||!X.overlay,K+=!X.overlay?1:0;if(this.options.hideSingleBase)Q=Q&&K>1,this._baseLayersList.style.display=Q?"":"none";return this._separator.style.display=J&&Q?"":"none",this},_onLayerChange:function(Q){if(!this._handlingClick)this._update();var J=this._getLayer(D(Q.target)),Y=J.overlay?Q.type==="add"?"overlayadd":"overlayremove":Q.type==="add"?"baselayerchange":null;if(Y)this._map.fire(Y,J)},_createRadioElement:function(Q,J){var Y='<input type="radio" class="leaflet-control-layers-selector" name="'+Q+'"'+(J?' checked="checked"':"")+"/>",X=document.createElement("div");return X.innerHTML=Y,X.firstChild},_addItem:function(Q){var J=document.createElement("label"),Y=this._map.hasLayer(Q.layer),X;if(Q.overlay)X=document.createElement("input"),X.type="checkbox",X.className="leaflet-control-layers-selector",X.defaultChecked=Y;else X=this._createRadioElement("leaflet-base-layers_"+D(this),Y);this._layerControlInputs.push(X),X.layerId=D(Q.layer),F(X,"click",this._onInputClick,this);var K=document.createElement("span");K.innerHTML=" "+Q.name;var V=document.createElement("span");J.appendChild(V),V.appendChild(X),V.appendChild(K);var U=Q.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(J),this._checkDisabledLayers(),J},_onInputClick:function(){if(this._preventClick)return;var Q=this._layerControlInputs,J,Y,X=[],K=[];this._handlingClick=!0;for(var V=Q.length-1;V>=0;V--)if(J=Q[V],Y=this._getLayer(J.layerId).layer,J.checked)X.push(Y);else if(!J.checked)K.push(Y);for(V=0;V<K.length;V++)if(this._map.hasLayer(K[V]))this._map.removeLayer(K[V]);for(V=0;V<X.length;V++)if(!this._map.hasLayer(X[V]))this._map.addLayer(X[V]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){var Q=this._layerControlInputs,J,Y,X=this._map.getZoom();for(var K=Q.length-1;K>=0;K--)J=Q[K],Y=this._getLayer(J.layerId).layer,J.disabled=Y.options.minZoom!==void 0&&X<Y.options.minZoom||Y.options.maxZoom!==void 0&&X>Y.options.maxZoom},_expandIfNotCollapsed:function(){if(this._map&&!this.options.collapsed)this.expand();return this},_expandSafely:function(){var Q=this._section;this._preventClick=!0,F(Q,"click",c),this.expand();var J=this;setTimeout(function(){C(Q,"click",c),J._preventClick=!1})}}),Q7=function(Q,J,Y){return new v5(Q,J,Y)},y1=Y0.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(Q){var J="leaflet-control-zoom",Y=O("div",J+" leaflet-bar"),X=this.options;return this._zoomInButton=this._createButton(X.zoomInText,X.zoomInTitle,J+"-in",Y,this._zoomIn),this._zoomOutButton=this._createButton(X.zoomOutText,X.zoomOutTitle,J+"-out",Y,this._zoomOut),this._updateDisabled(),Q.on("zoomend zoomlevelschange",this._updateDisabled,this),Y},onRemove:function(Q){Q.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(Q){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom())this._map.zoomIn(this._map.options.zoomDelta*(Q.shiftKey?3:1))},_zoomOut:function(Q){if(!this._disabled&&this._map._zoom>this._map.getMinZoom())this._map.zoomOut(this._map.options.zoomDelta*(Q.shiftKey?3:1))},_createButton:function(Q,J,Y,X,K){var V=O("a",Y,X);return V.innerHTML=Q,V.href="#",V.title=J,V.setAttribute("role","button"),V.setAttribute("aria-label",J),y0(V),F(V,"click",T0),F(V,"click",K,this),F(V,"click",this._refocusOnMap,this),V},_updateDisabled:function(){var Q=this._map,J="leaflet-disabled";if(j(this._zoomInButton,J),j(this._zoomOutButton,J),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),this._disabled||Q._zoom===Q.getMinZoom())h(this._zoomOutButton,J),this._zoomOutButton.setAttribute("aria-disabled","true");if(this._disabled||Q._zoom===Q.getMaxZoom())h(this._zoomInButton,J),this._zoomInButton.setAttribute("aria-disabled","true")}});_.mergeOptions({zoomControl:!0}),_.addInitHook(function(){if(this.options.zoomControl)this.zoomControl=new y1,this.addControl(this.zoomControl)});var J7=function(Q){return new y1(Q)},L5=Y0.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(Q){var J="leaflet-control-scale",Y=O("div",J),X=this.options;return this._addScales(X,J+"-line",Y),Q.on(X.updateWhenIdle?"moveend":"move",this._update,this),Q.whenReady(this._update,this),Y},onRemove:function(Q){Q.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(Q,J,Y){if(Q.metric)this._mScale=O("div",J,Y);if(Q.imperial)this._iScale=O("div",J,Y)},_update:function(){var Q=this._map,J=Q.getSize().y/2,Y=Q.distance(Q.containerPointToLatLng([0,J]),Q.containerPointToLatLng([this.options.maxWidth,J]));this._updateScales(Y)},_updateScales:function(Q){if(this.options.metric&&Q)this._updateMetric(Q);if(this.options.imperial&&Q)this._updateImperial(Q)},_updateMetric:function(Q){var J=this._getRoundNum(Q),Y=J<1000?J+" m":J/1000+" km";this._updateScale(this._mScale,Y,J/Q)},_updateImperial:function(Q){var J=Q*3.2808399,Y,X,K;if(J>5280)Y=J/5280,X=this._getRoundNum(Y),this._updateScale(this._iScale,X+" mi",X/Y);else K=this._getRoundNum(J),this._updateScale(this._iScale,K+" ft",K/J)},_updateScale:function(Q,J,Y){Q.style.width=Math.round(this.options.maxWidth*Y)+"px",Q.innerHTML=J},_getRoundNum:function(Q){var J=Math.pow(10,(Math.floor(Q)+"").length-1),Y=Q/J;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:1,J*Y}}),Y7=function(Q){return new L5(Q)},X7='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',m1=Y0.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(E.inlineSvg?X7+" ":"")+"Leaflet</a>"},initialize:function(Q){f(this,Q),this._attributions={}},onAdd:function(Q){Q.attributionControl=this,this._container=O("div","leaflet-control-attribution"),y0(this._container);for(var J in Q._layers)if(Q._layers[J].getAttribution)this.addAttribution(Q._layers[J].getAttribution());return this._update(),Q.on("layeradd",this._addAttribution,this),this._container},onRemove:function(Q){Q.off("layeradd",this._addAttribution,this)},_addAttribution:function(Q){if(Q.layer.getAttribution)this.addAttribution(Q.layer.getAttribution()),Q.layer.once("remove",function(){this.removeAttribution(Q.layer.getAttribution())},this)},setPrefix:function(Q){return this.options.prefix=Q,this._update(),this},addAttribution:function(Q){if(!Q)return this;if(!this._attributions[Q])this._attributions[Q]=0;return this._attributions[Q]++,this._update(),this},removeAttribution:function(Q){if(!Q)return this;if(this._attributions[Q])this._attributions[Q]--,this._update();return this},_update:function(){if(!this._map)return;var Q=[];for(var J in this._attributions)if(this._attributions[J])Q.push(J);var Y=[];if(this.options.prefix)Y.push(this.options.prefix);if(Q.length)Y.push(Q.join(", "));this._container.innerHTML=Y.join(' <span aria-hidden="true">|</span> ')}});_.mergeOptions({attributionControl:!0}),_.addInitHook(function(){if(this.options.attributionControl)new m1().addTo(this)});var K7=function(Q){return new m1(Q)};Y0.Layers=v5,Y0.Zoom=y1,Y0.Scale=L5,Y0.Attribution=m1,m0.layers=Q7,m0.zoom=J7,m0.scale=Y7,m0.attribution=K7;var $0=H0.extend({initialize:function(Q){this._map=Q},enable:function(){if(this._enabled)return this;return this._enabled=!0,this.addHooks(),this},disable:function(){if(!this._enabled)return this;return this._enabled=!1,this.removeHooks(),this},enabled:function(){return!!this._enabled}});$0.addTo=function(Q,J){return Q.addHandler(J,this),this};var V7={Events:a},x5=E.touch?"touchstart mousedown":"mousedown",A0=j0.extend({options:{clickTolerance:3},initialize:function(Q,J,Y,X){f(this,X),this._element=Q,this._dragStartTarget=J||Q,this._preventOutline=Y},enable:function(){if(this._enabled)return;F(this._dragStartTarget,x5,this._onDown,this),this._enabled=!0},disable:function(){if(!this._enabled)return;if(A0._dragging===this)this.finishDrag(!0);C(this._dragStartTarget,x5,this._onDown,this),this._enabled=!1,this._moved=!1},_onDown:function(Q){if(!this._enabled)return;if(this._moved=!1,B1(this._element,"leaflet-zoom-anim"))return;if(Q.touches&&Q.touches.length!==1){if(A0._dragging===this)this.finishDrag();return}if(A0._dragging||Q.shiftKey||Q.which!==1&&Q.button!==1&&!Q.touches)return;if(A0._dragging=this,this._preventOutline)v1(this._element);if(z1(),u0(),this._moving)return;this.fire("down");var J=Q.touches?Q.touches[0]:Q,Y=B5(this._element);this._startPoint=new N(J.clientX,J.clientY),this._startPos=D0(this._element),this._parentScale=L1(Y);var X=Q.type==="mousedown";F(document,X?"mousemove":"touchmove",this._onMove,this),F(document,X?"mouseup":"touchend touchcancel",this._onUp,this)},_onMove:function(Q){if(!this._enabled)return;if(Q.touches&&Q.touches.length>1){this._moved=!0;return}var J=Q.touches&&Q.touches.length===1?Q.touches[0]:Q,Y=new N(J.clientX,J.clientY)._subtract(this._startPoint);if(!Y.x&&!Y.y)return;if(Math.abs(Y.x)+Math.abs(Y.y)<this.options.clickTolerance)return;if(Y.x/=this._parentScale.x,Y.y/=this._parentScale.y,c(Q),!this._moved){if(this.fire("dragstart"),this._moved=!0,h(document.body,"leaflet-dragging"),this._lastTarget=Q.target||Q.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance)this._lastTarget=this._lastTarget.correspondingUseElement;h(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(Y),this._moving=!0,this._lastEvent=Q,this._updatePosition()},_updatePosition:function(){var Q={originalEvent:this._lastEvent};this.fire("predrag",Q),x(this._element,this._newPos),this.fire("drag",Q)},_onUp:function(){if(!this._enabled)return;this.finishDrag()},finishDrag:function(Q){if(j(document.body,"leaflet-dragging"),this._lastTarget)j(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null;C(document,"mousemove touchmove",this._onMove,this),C(document,"mouseup touchend touchcancel",this._onUp,this),P1(),g0();var J=this._moved&&this._moving;if(this._moving=!1,A0._dragging=!1,J)this.fire("dragend",{noInertia:Q,distance:this._newPos.distanceTo(this._startPos)})}});function b5(Q,J,Y){var X,K=[1,4,2,8],V,U,$,W,G,q,Z,T;for(V=0,q=Q.length;V<q;V++)Q[V]._code=k0(Q[V],J);for($=0;$<4;$++){Z=K[$],X=[];for(V=0,q=Q.length,U=q-1;V<q;U=V++)if(W=Q[V],G=Q[U],!(W._code&Z)){if(G._code&Z)T=Y1(G,W,Z,J,Y),T._code=k0(T,J),X.push(T);X.push(W)}else if(!(G._code&Z))T=Y1(G,W,Z,J,Y),T._code=k0(T,J),X.push(T);Q=X}return Q}function u5(Q,J){var Y,X,K,V,U,$,W,G,q;if(!Q||Q.length===0)throw Error("latlngs not passed");if(!o(Q))console.warn("latlngs are not flat! Only the first ring will be used"),Q=Q[0];var Z=k([0,0]),T=v(Q),m=T.getNorthWest().distanceTo(T.getSouthWest())*T.getNorthEast().distanceTo(T.getNorthWest());if(m<1700)Z=d1(Q);var g=Q.length,e=[];for(Y=0;Y<g;Y++){var r=k(Q[Y]);e.push(J.project(k([r.lat-Z.lat,r.lng-Z.lng])))}$=W=G=0;for(Y=0,X=g-1;Y<g;X=Y++)K=e[Y],V=e[X],U=K.y*V.x-V.y*K.x,W+=(K.x+V.x)*U,G+=(K.y+V.y)*U,$+=U*3;if($===0)q=e[0];else q=[W/$,G/$];var P0=J.unproject(R(q));return k([P0.lat+Z.lat,P0.lng+Z.lng])}function d1(Q){var J=0,Y=0,X=0;for(var K=0;K<Q.length;K++){var V=k(Q[K]);J+=V.lat,Y+=V.lng,X++}return k([J/X,Y/X])}var U7={__proto__:null,clipPolygon:b5,polygonCenter:u5,centroid:d1};function g5(Q,J){if(!J||!Q.length)return Q.slice();var Y=J*J;return Q=H7(Q,Y),Q=W7(Q,Y),Q}function c5(Q,J,Y){return Math.sqrt(d0(Q,J,Y,!0))}function $7(Q,J,Y){return d0(Q,J,Y)}function W7(Q,J){var Y=Q.length,X=typeof Uint8Array<"u"?Uint8Array:Array,K=new X(Y);K[0]=K[Y-1]=1,p1(Q,K,J,0,Y-1);var V,U=[];for(V=0;V<Y;V++)if(K[V])U.push(Q[V]);return U}function p1(Q,J,Y,X,K){var V=0,U,$,W;for($=X+1;$<=K-1;$++)if(W=d0(Q[$],Q[X],Q[K],!0),W>V)U=$,V=W;if(V>Y)J[U]=1,p1(Q,J,Y,X,U),p1(Q,J,Y,U,K)}function H7(Q,J){var Y=[Q[0]];for(var X=1,K=0,V=Q.length;X<V;X++)if(G7(Q[X],Q[K])>J)Y.push(Q[X]),K=X;if(K<V-1)Y.push(Q[V-1]);return Y}var y5;function m5(Q,J,Y,X,K){var V=X?y5:k0(Q,Y),U=k0(J,Y),$,W,G;y5=U;while(!0){if(!(V|U))return[Q,J];if(V&U)return!1;if($=V||U,W=Y1(Q,J,$,Y,K),G=k0(W,Y),$===V)Q=W,V=G;else J=W,U=G}}function Y1(Q,J,Y,X,K){var V=J.x-Q.x,U=J.y-Q.y,$=X.min,W=X.max,G,q;if(Y&8)G=Q.x+V*(W.y-Q.y)/U,q=W.y;else if(Y&4)G=Q.x+V*($.y-Q.y)/U,q=$.y;else if(Y&2)G=W.x,q=Q.y+U*(W.x-Q.x)/V;else if(Y&1)G=$.x,q=Q.y+U*($.x-Q.x)/V;return new N(G,q,K)}function k0(Q,J){var Y=0;if(Q.x<J.min.x)Y|=1;else if(Q.x>J.max.x)Y|=2;if(Q.y<J.min.y)Y|=4;else if(Q.y>J.max.y)Y|=8;return Y}function G7(Q,J){var Y=J.x-Q.x,X=J.y-Q.y;return Y*Y+X*X}function d0(Q,J,Y,X){var{x:K,y:V}=J,U=Y.x-K,$=Y.y-V,W=U*U+$*$,G;if(W>0){if(G=((Q.x-K)*U+(Q.y-V)*$)/W,G>1)K=Y.x,V=Y.y;else if(G>0)K+=U*G,V+=$*G}return U=Q.x-K,$=Q.y-V,X?U*U+$*$:new N(K,V)}function o(Q){return!J0(Q[0])||typeof Q[0][0]!=="object"&&typeof Q[0][0]<"u"}function d5(Q){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),o(Q)}function p5(Q,J){var Y,X,K,V,U,$,W,G;if(!Q||Q.length===0)throw Error("latlngs not passed");if(!o(Q))console.warn("latlngs are not flat! Only the first ring will be used"),Q=Q[0];var q=k([0,0]),Z=v(Q),T=Z.getNorthWest().distanceTo(Z.getSouthWest())*Z.getNorthEast().distanceTo(Z.getNorthWest());if(T<1700)q=d1(Q);var m=Q.length,g=[];for(Y=0;Y<m;Y++){var e=k(Q[Y]);g.push(J.project(k([e.lat-q.lat,e.lng-q.lng])))}for(Y=0,X=0;Y<m-1;Y++)X+=g[Y].distanceTo(g[Y+1])/2;if(X===0)G=g[0];else for(Y=0,V=0;Y<m-1;Y++)if(U=g[Y],$=g[Y+1],K=U.distanceTo($),V+=K,V>X){W=(V-X)/K,G=[$.x-W*($.x-U.x),$.y-W*($.y-U.y)];break}var r=J.unproject(R(G));return k([r.lat+q.lat,r.lng+q.lng])}var q7={__proto__:null,simplify:g5,pointToSegmentDistance:c5,closestPointOnSegment:$7,clipSegment:m5,_getEdgeIntersection:Y1,_getBitCode:k0,_sqClosestPointOnSegment:d0,isFlat:o,_flat:d5,polylineCenter:p5},l1={project:function(Q){return new N(Q.lng,Q.lat)},unproject:function(Q){return new S(Q.y,Q.x)},bounds:new z([-180,-90],[180,90])},i1={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(Q){var J=Math.PI/180,Y=this.R,X=Q.lat*J,K=this.R_MINOR/Y,V=Math.sqrt(1-K*K),U=V*Math.sin(X),$=Math.tan(Math.PI/4-X/2)/Math.pow((1-U)/(1+U),V/2);return X=-Y*Math.log(Math.max($,0.0000000001)),new N(Q.lng*J*Y,X)},unproject:function(Q){var J=180/Math.PI,Y=this.R,X=this.R_MINOR/Y,K=Math.sqrt(1-X*X),V=Math.exp(-Q.y/Y),U=Math.PI/2-2*Math.atan(V);for(var $=0,W=0.1,G;$<15&&Math.abs(W)>0.0000001;$++)G=K*Math.sin(U),G=Math.pow((1-G)/(1+G),K/2),W=Math.PI/2-2*Math.atan(V*G)-U,U+=W;return new S(U*J,Q.x*J/Y)}},I7={__proto__:null,LonLat:l1,Mercator:i1,SphericalMercator:N1},E7=I({},Z0,{code:"EPSG:3395",projection:i1,transformation:function(){var Q=0.5/(Math.PI*i1.R);return v0(Q,0.5,-Q,0.5)}()}),l5=I({},Z0,{code:"EPSG:4326",projection:l1,transformation:v0(0.005555555555555556,1,-0.005555555555555556,0.5)}),M7=I({},G0,{projection:l1,transformation:v0(1,0,-1,0),scale:function(Q){return Math.pow(2,Q)},zoom:function(Q){return Math.log(Q)/Math.LN2},distance:function(Q,J){var Y=J.lng-Q.lng,X=J.lat-Q.lat;return Math.sqrt(Y*Y+X*X)},infinite:!0});G0.Earth=Z0,G0.EPSG3395=E7,G0.EPSG3857=D1,G0.EPSG900913=D6,G0.EPSG4326=l5,G0.Simple=M7;var X0=j0.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(Q){return Q.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(Q){if(Q)Q.removeLayer(this);return this},getPane:function(Q){return this._map.getPane(Q?this.options[Q]||Q:this.options.pane)},addInteractiveTarget:function(Q){return this._map._targets[D(Q)]=this,this},removeInteractiveTarget:function(Q){return delete this._map._targets[D(Q)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(Q){var J=Q.target;if(!J.hasLayer(this))return;if(this._map=J,this._zoomAnimated=J._zoomAnimated,this.getEvents){var Y=this.getEvents();J.on(Y,this),this.once("remove",function(){J.off(Y,this)},this)}this.onAdd(J),this.fire("add"),J.fire("layeradd",{layer:this})}});_.include({addLayer:function(Q){if(!Q._layerAdd)throw Error("The provided object is not a Layer.");var J=D(Q);if(this._layers[J])return this;if(this._layers[J]=Q,Q._mapToAdd=this,Q.beforeAdd)Q.beforeAdd(this);return this.whenReady(Q._layerAdd,Q),this},removeLayer:function(Q){var J=D(Q);if(!this._layers[J])return this;if(this._loaded)Q.onRemove(this);if(delete this._layers[J],this._loaded)this.fire("layerremove",{layer:Q}),Q.fire("remove");return Q._map=Q._mapToAdd=null,this},hasLayer:function(Q){return D(Q)in this._layers},eachLayer:function(Q,J){for(var Y in this._layers)Q.call(J,this._layers[Y]);return this},_addLayers:function(Q){Q=Q?J0(Q)?Q:[Q]:[];for(var J=0,Y=Q.length;J<Y;J++)this.addLayer(Q[J])},_addZoomLimit:function(Q){if(!isNaN(Q.options.maxZoom)||!isNaN(Q.options.minZoom))this._zoomBoundLayers[D(Q)]=Q,this._updateZoomLevels()},_removeZoomLimit:function(Q){var J=D(Q);if(this._zoomBoundLayers[J])delete this._zoomBoundLayers[J],this._updateZoomLevels()},_updateZoomLevels:function(){var Q=1/0,J=-1/0,Y=this._getZoomSpan();for(var X in this._zoomBoundLayers){var K=this._zoomBoundLayers[X].options;Q=K.minZoom===void 0?Q:Math.min(Q,K.minZoom),J=K.maxZoom===void 0?J:Math.max(J,K.maxZoom)}if(this._layersMaxZoom=J===-1/0?void 0:J,this._layersMinZoom=Q===1/0?void 0:Q,Y!==this._getZoomSpan())this.fire("zoomlevelschange");if(this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom)this.setZoom(this._layersMaxZoom);if(this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom)this.setZoom(this._layersMinZoom)}});var S0=X0.extend({initialize:function(Q,J){f(this,J),this._layers={};var Y,X;if(Q)for(Y=0,X=Q.length;Y<X;Y++)this.addLayer(Q[Y])},addLayer:function(Q){var J=this.getLayerId(Q);if(this._layers[J]=Q,this._map)this._map.addLayer(Q);return this},removeLayer:function(Q){var J=Q in this._layers?Q:this.getLayerId(Q);if(this._map&&this._layers[J])this._map.removeLayer(this._layers[J]);return delete this._layers[J],this},hasLayer:function(Q){var J=typeof Q==="number"?Q:this.getLayerId(Q);return J in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(Q){var J=Array.prototype.slice.call(arguments,1),Y,X;for(Y in this._layers)if(X=this._layers[Y],X[Q])X[Q].apply(X,J);return this},onAdd:function(Q){this.eachLayer(Q.addLayer,Q)},onRemove:function(Q){this.eachLayer(Q.removeLayer,Q)},eachLayer:function(Q,J){for(var Y in this._layers)Q.call(J,this._layers[Y]);return this},getLayer:function(Q){return this._layers[Q]},getLayers:function(){var Q=[];return this.eachLayer(Q.push,Q),Q},setZIndex:function(Q){return this.invoke("setZIndex",Q)},getLayerId:function(Q){return D(Q)}}),Z7=function(Q,J){return new S0(Q,J)},q0=S0.extend({addLayer:function(Q){if(this.hasLayer(Q))return this;return Q.addEventParent(this),S0.prototype.addLayer.call(this,Q),this.fire("layeradd",{layer:Q})},removeLayer:function(Q){if(!this.hasLayer(Q))return this;if(Q in this._layers)Q=this._layers[Q];return Q.removeEventParent(this),S0.prototype.removeLayer.call(this,Q),this.fire("layerremove",{layer:Q})},setStyle:function(Q){return this.invoke("setStyle",Q)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var Q=new i;for(var J in this._layers){var Y=this._layers[J];Q.extend(Y.getBounds?Y.getBounds():Y.getLatLng())}return Q}}),A7=function(Q,J){return new q0(Q,J)},B0=H0.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(Q){f(this,Q)},createIcon:function(Q){return this._createIcon("icon",Q)},createShadow:function(Q){return this._createIcon("shadow",Q)},_createIcon:function(Q,J){var Y=this._getIconUrl(Q);if(!Y){if(Q==="icon")throw Error("iconUrl not set in Icon options (see the docs).");return null}var X=this._createImg(Y,J&&J.tagName==="IMG"?J:null);if(this._setIconStyles(X,Q),this.options.crossOrigin||this.options.crossOrigin==="")X.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin;return X},_setIconStyles:function(Q,J){var Y=this.options,X=Y[J+"Size"];if(typeof X==="number")X=[X,X];var K=R(X),V=R(J==="shadow"&&Y.shadowAnchor||Y.iconAnchor||K&&K.divideBy(2,!0));if(Q.className="leaflet-marker-"+J+" "+(Y.className||""),V)Q.style.marginLeft=-V.x+"px",Q.style.marginTop=-V.y+"px";if(K)Q.style.width=K.x+"px",Q.style.height=K.y+"px"},_createImg:function(Q,J){return J=J||document.createElement("img"),J.src=Q,J},_getIconUrl:function(Q){return E.retina&&this.options[Q+"RetinaUrl"]||this.options[Q+"Url"]}});function R7(Q){return new B0(Q)}var p0=B0.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(Q){if(typeof p0.imagePath!=="string")p0.imagePath=this._detectIconPath();return(this.options.imagePath||p0.imagePath)+B0.prototype._getIconUrl.call(this,Q)},_stripUrl:function(Q){var J=function(Y,X,K){var V=X.exec(Y);return V&&V[K]};return Q=J(Q,/^url\((['"])?(.+)\1\)$/,2),Q&&J(Q,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var Q=O("div","leaflet-default-icon-path",document.body),J=b0(Q,"background-image")||b0(Q,"backgroundImage");if(document.body.removeChild(Q),J=this._stripUrl(J),J)return J;var Y=document.querySelector('link[href$="leaflet.css"]');if(!Y)return"";return Y.href.substring(0,Y.href.length-11-1)}}),i5=$0.extend({initialize:function(Q){this._marker=Q},addHooks:function(){var Q=this._marker._icon;if(!this._draggable)this._draggable=new A0(Q,Q,!0);this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),h(Q,"leaflet-marker-draggable")},removeHooks:function(){if(this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon)j(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(Q){var J=this._marker,Y=J._map,X=this._marker.options.autoPanSpeed,K=this._marker.options.autoPanPadding,V=D0(J._icon),U=Y.getPixelBounds(),$=Y.getPixelOrigin(),W=l(U.min._subtract($).add(K),U.max._subtract($).subtract(K));if(!W.contains(V)){var G=R((Math.max(W.max.x,V.x)-W.max.x)/(U.max.x-W.max.x)-(Math.min(W.min.x,V.x)-W.min.x)/(U.min.x-W.min.x),(Math.max(W.max.y,V.y)-W.max.y)/(U.max.y-W.max.y)-(Math.min(W.min.y,V.y)-W.min.y)/(U.min.y-W.min.y)).multiplyBy(X);Y.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),x(J._icon,this._draggable._newPos),this._onDrag(Q),this._panRequest=p(this._adjustPan.bind(this,Q))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(Q){if(this._marker.options.autoPan)n(this._panRequest),this._panRequest=p(this._adjustPan.bind(this,Q))},_onDrag:function(Q){var J=this._marker,Y=J._shadow,X=D0(J._icon),K=J._map.layerPointToLatLng(X);if(Y)x(Y,X);J._latlng=K,Q.latlng=K,Q.oldLatLng=this._oldLatLng,J.fire("move",Q).fire("drag",Q)},_onDragEnd:function(Q){n(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",Q)}}),X1=X0.extend({options:{icon:new p0,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(Q,J){f(this,J),this._latlng=k(Q)},onAdd:function(Q){if(this._zoomAnimated=this._zoomAnimated&&Q.options.markerZoomAnimation,this._zoomAnimated)Q.on("zoomanim",this._animateZoom,this);this._initIcon(),this.update()},onRemove:function(Q){if(this.dragging&&this.dragging.enabled())this.options.draggable=!0,this.dragging.removeHooks();if(delete this.dragging,this._zoomAnimated)Q.off("zoomanim",this._animateZoom,this);this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(Q){var J=this._latlng;return this._latlng=k(Q),this.update(),this.fire("move",{oldLatLng:J,latlng:this._latlng})},setZIndexOffset:function(Q){return this.options.zIndexOffset=Q,this.update()},getIcon:function(){return this.options.icon},setIcon:function(Q){if(this.options.icon=Q,this._map)this._initIcon(),this.update();if(this._popup)this.bindPopup(this._popup,this._popup.options);return this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var Q=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(Q)}return this},_initIcon:function(){var Q=this.options,J="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Y=Q.icon.createIcon(this._icon),X=!1;if(Y!==this._icon){if(this._icon)this._removeIcon();if(X=!0,Q.title)Y.title=Q.title;if(Y.tagName==="IMG")Y.alt=Q.alt||""}if(h(Y,J),Q.keyboard)Y.tabIndex="0",Y.setAttribute("role","button");if(this._icon=Y,Q.riseOnHover)this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});if(this.options.autoPanOnFocus)F(Y,"focus",this._panOnFocus,this);var K=Q.icon.createShadow(this._shadow),V=!1;if(K!==this._shadow)this._removeShadow(),V=!0;if(K)h(K,J),K.alt="";if(this._shadow=K,Q.opacity<1)this._updateOpacity();if(X)this.getPane().appendChild(this._icon);if(this._initInteraction(),K&&V)this.getPane(Q.shadowPane).appendChild(this._shadow)},_removeIcon:function(){if(this.options.riseOnHover)this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex});if(this.options.autoPanOnFocus)C(this._icon,"focus",this._panOnFocus,this);P(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){if(this._shadow)P(this._shadow);this._shadow=null},_setPos:function(Q){if(this._icon)x(this._icon,Q);if(this._shadow)x(this._shadow,Q);this._zIndex=Q.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(Q){if(this._icon)this._icon.style.zIndex=this._zIndex+Q},_animateZoom:function(Q){var J=this._map._latLngToNewLayerPoint(this._latlng,Q.zoom,Q.center).round();this._setPos(J)},_initInteraction:function(){if(!this.options.interactive)return;if(h(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),i5){var Q=this.options.draggable;if(this.dragging)Q=this.dragging.enabled(),this.dragging.disable();if(this.dragging=new i5(this),Q)this.dragging.enable()}},setOpacity:function(Q){if(this.options.opacity=Q,this._map)this._updateOpacity();return this},_updateOpacity:function(){var Q=this.options.opacity;if(this._icon)t(this._icon,Q);if(this._shadow)t(this._shadow,Q)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var Q=this._map;if(!Q)return;var J=this.options.icon.options,Y=J.iconSize?R(J.iconSize):R(0,0),X=J.iconAnchor?R(J.iconAnchor):R(0,0);Q.panInside(this._latlng,{paddingTopLeft:X,paddingBottomRight:Y.subtract(X)})},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function N7(Q,J){return new X1(Q,J)}var R0=X0.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(Q){this._renderer=Q.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){if(this._map)this._renderer._updatePath(this);return this},setStyle:function(Q){if(f(this,Q),this._renderer){if(this._renderer._updateStyle(this),this.options.stroke&&Q&&Object.prototype.hasOwnProperty.call(Q,"weight"))this._updateBounds()}return this},bringToFront:function(){if(this._renderer)this._renderer._bringToFront(this);return this},bringToBack:function(){if(this._renderer)this._renderer._bringToBack(this);return this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),K1=R0.extend({options:{fill:!0,radius:10},initialize:function(Q,J){f(this,J),this._latlng=k(Q),this._radius=this.options.radius},setLatLng:function(Q){var J=this._latlng;return this._latlng=k(Q),this.redraw(),this.fire("move",{oldLatLng:J,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(Q){return this.options.radius=this._radius=Q,this.redraw()},getRadius:function(){return this._radius},setStyle:function(Q){var J=Q&&Q.radius||this._radius;return R0.prototype.setStyle.call(this,Q),this.setRadius(J),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var Q=this._radius,J=this._radiusY||Q,Y=this._clickTolerance(),X=[Q+Y,J+Y];this._pxBounds=new z(this._point.subtract(X),this._point.add(X))},_update:function(){if(this._map)this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(Q){return Q.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function F7(Q,J){return new K1(Q,J)}var r1=K1.extend({initialize:function(Q,J,Y){if(typeof J==="number")J=I({},Y,{radius:J});if(f(this,J),this._latlng=k(Q),isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(Q){return this._mRadius=Q,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var Q=[this._radius,this._radiusY||this._radius];return new i(this._map.layerPointToLatLng(this._point.subtract(Q)),this._map.layerPointToLatLng(this._point.add(Q)))},setStyle:R0.prototype.setStyle,_project:function(){var Q=this._latlng.lng,J=this._latlng.lat,Y=this._map,X=Y.options.crs;if(X.distance===Z0.distance){var K=Math.PI/180,V=this._mRadius/Z0.R/K,U=Y.project([J+V,Q]),$=Y.project([J-V,Q]),W=U.add($).divideBy(2),G=Y.unproject(W).lat,q=Math.acos((Math.cos(V*K)-Math.sin(J*K)*Math.sin(G*K))/(Math.cos(J*K)*Math.cos(G*K)))/K;if(isNaN(q)||q===0)q=V/Math.cos(Math.PI/180*J);this._point=W.subtract(Y.getPixelOrigin()),this._radius=isNaN(q)?0:W.x-Y.project([G,Q-q]).x,this._radiusY=W.y-U.y}else{var Z=X.unproject(X.project(this._latlng).subtract([this._mRadius,0]));this._point=Y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Y.latLngToLayerPoint(Z).x}this._updateBounds()}});function D7(Q,J,Y){return new r1(Q,J,Y)}var I0=R0.extend({options:{smoothFactor:1,noClip:!1},initialize:function(Q,J){f(this,J),this._setLatLngs(Q)},getLatLngs:function(){return this._latlngs},setLatLngs:function(Q){return this._setLatLngs(Q),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(Q){var J=1/0,Y=null,X=d0,K,V;for(var U=0,$=this._parts.length;U<$;U++){var W=this._parts[U];for(var G=1,q=W.length;G<q;G++){K=W[G-1],V=W[G];var Z=X(Q,K,V,!0);if(Z<J)J=Z,Y=X(Q,K,V)}}if(Y)Y.distance=Math.sqrt(J);return Y},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return p5(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(Q,J){return J=J||this._defaultShape(),Q=k(Q),J.push(Q),this._bounds.extend(Q),this.redraw()},_setLatLngs:function(Q){this._bounds=new i,this._latlngs=this._convertLatLngs(Q)},_defaultShape:function(){return o(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(Q){var J=[],Y=o(Q);for(var X=0,K=Q.length;X<K;X++)if(Y)J[X]=k(Q[X]),this._bounds.extend(J[X]);else J[X]=this._convertLatLngs(Q[X]);return J},_project:function(){var Q=new z;if(this._rings=[],this._projectLatlngs(this._latlngs,this._rings,Q),this._bounds.isValid()&&Q.isValid())this._rawPxBounds=Q,this._updateBounds()},_updateBounds:function(){var Q=this._clickTolerance(),J=new N(Q,Q);if(!this._rawPxBounds)return;this._pxBounds=new z([this._rawPxBounds.min.subtract(J),this._rawPxBounds.max.add(J)])},_projectLatlngs:function(Q,J,Y){var X=Q[0]instanceof S,K=Q.length,V,U;if(X){U=[];for(V=0;V<K;V++)U[V]=this._map.latLngToLayerPoint(Q[V]),Y.extend(U[V]);J.push(U)}else for(V=0;V<K;V++)this._projectLatlngs(Q[V],J,Y)},_clipPoints:function(){var Q=this._renderer._bounds;if(this._parts=[],!this._pxBounds||!this._pxBounds.intersects(Q))return;if(this.options.noClip){this._parts=this._rings;return}var J=this._parts,Y,X,K,V,U,$,W;for(Y=0,K=0,V=this._rings.length;Y<V;Y++){W=this._rings[Y];for(X=0,U=W.length;X<U-1;X++){if($=m5(W[X],W[X+1],Q,X,!0),!$)continue;if(J[K]=J[K]||[],J[K].push($[0]),$[1]!==W[X+1]||X===U-2)J[K].push($[1]),K++}}},_simplifyPoints:function(){var Q=this._parts,J=this.options.smoothFactor;for(var Y=0,X=Q.length;Y<X;Y++)Q[Y]=g5(Q[Y],J)},_update:function(){if(!this._map)return;this._clipPoints(),this._simplifyPoints(),this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(Q,J){var Y,X,K,V,U,$,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(Q))return!1;for(Y=0,V=this._parts.length;Y<V;Y++){$=this._parts[Y];for(X=0,U=$.length,K=U-1;X<U;K=X++){if(!J&&X===0)continue;if(c5(Q,$[K],$[X])<=W)return!0}}return!1}});function h7(Q,J){return new I0(Q,J)}I0._flat=d5;var C0=I0.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return u5(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(Q){var J=I0.prototype._convertLatLngs.call(this,Q),Y=J.length;if(Y>=2&&J[0]instanceof S&&J[0].equals(J[Y-1]))J.pop();return J},_setLatLngs:function(Q){if(I0.prototype._setLatLngs.call(this,Q),o(this._latlngs))this._latlngs=[this._latlngs]},_defaultShape:function(){return o(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var Q=this._renderer._bounds,J=this.options.weight,Y=new N(J,J);if(Q=new z(Q.min.subtract(Y),Q.max.add(Y)),this._parts=[],!this._pxBounds||!this._pxBounds.intersects(Q))return;if(this.options.noClip){this._parts=this._rings;return}for(var X=0,K=this._rings.length,V;X<K;X++)if(V=b5(this._rings[X],Q,!0),V.length)this._parts.push(V)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(Q){var J=!1,Y,X,K,V,U,$,W,G;if(!this._pxBounds||!this._pxBounds.contains(Q))return!1;for(V=0,W=this._parts.length;V<W;V++){Y=this._parts[V];for(U=0,G=Y.length,$=G-1;U<G;$=U++)if(X=Y[U],K=Y[$],X.y>Q.y!==K.y>Q.y&&Q.x<(K.x-X.x)*(Q.y-X.y)/(K.y-X.y)+X.x)J=!J}return J||I0.prototype._containsPoint.call(this,Q,!0)}});function T7(Q,J){return new C0(Q,J)}var E0=q0.extend({initialize:function(Q,J){if(f(this,J),this._layers={},Q)this.addData(Q)},addData:function(Q){var J=J0(Q)?Q:Q.features,Y,X,K;if(J){for(Y=0,X=J.length;Y<X;Y++)if(K=J[Y],K.geometries||K.geometry||K.features||K.coordinates)this.addData(K);return this}var V=this.options;if(V.filter&&!V.filter(Q))return this;var U=V1(Q,V);if(!U)return this;if(U.feature=W1(Q),U.defaultOptions=U.options,this.resetStyle(U),V.onEachFeature)V.onEachFeature(Q,U);return this.addLayer(U)},resetStyle:function(Q){if(Q===void 0)return this.eachLayer(this.resetStyle,this);return Q.options=I({},Q.defaultOptions),this._setLayerStyle(Q,this.options.style),this},setStyle:function(Q){return this.eachLayer(function(J){this._setLayerStyle(J,Q)},this)},_setLayerStyle:function(Q,J){if(Q.setStyle){if(typeof J==="function")J=J(Q.feature);Q.setStyle(J)}}});function V1(Q,J){var Y=Q.type==="Feature"?Q.geometry:Q,X=Y?Y.coordinates:null,K=[],V=J&&J.pointToLayer,U=J&&J.coordsToLatLng||a1,$,W,G,q;if(!X&&!Y)return null;switch(Y.type){case"Point":return $=U(X),r5(V,Q,$,J);case"MultiPoint":for(G=0,q=X.length;G<q;G++)$=U(X[G]),K.push(r5(V,Q,$,J));return new q0(K);case"LineString":case"MultiLineString":return W=U1(X,Y.type==="LineString"?0:1,U),new I0(W,J);case"Polygon":case"MultiPolygon":return W=U1(X,Y.type==="Polygon"?1:2,U),new C0(W,J);case"GeometryCollection":for(G=0,q=Y.geometries.length;G<q;G++){var Z=V1({geometry:Y.geometries[G],type:"Feature",properties:Q.properties},J);if(Z)K.push(Z)}return new q0(K);case"FeatureCollection":for(G=0,q=Y.features.length;G<q;G++){var T=V1(Y.features[G],J);if(T)K.push(T)}return new q0(K);default:throw Error("Invalid GeoJSON object.")}}function r5(Q,J,Y,X){return Q?Q(J,Y):new X1(Y,X&&X.markersInheritOptions&&X)}function a1(Q){return new S(Q[1],Q[0],Q[2])}function U1(Q,J,Y){var X=[];for(var K=0,V=Q.length,U;K<V;K++)U=J?U1(Q[K],J-1,Y):(Y||a1)(Q[K]),X.push(U);return X}function s1(Q,J){return Q=k(Q),Q.alt!==void 0?[u(Q.lng,J),u(Q.lat,J),u(Q.alt,J)]:[u(Q.lng,J),u(Q.lat,J)]}function $1(Q,J,Y,X){var K=[];for(var V=0,U=Q.length;V<U;V++)K.push(J?$1(Q[V],o(Q[V])?0:J-1,Y,X):s1(Q[V],X));if(!J&&Y&&K.length>0)K.push(K[0].slice());return K}function f0(Q,J){return Q.feature?I({},Q.feature,{geometry:J}):W1(J)}function W1(Q){if(Q.type==="Feature"||Q.type==="FeatureCollection")return Q;return{type:"Feature",properties:{},geometry:Q}}var n1={toGeoJSON:function(Q){return f0(this,{type:"Point",coordinates:s1(this.getLatLng(),Q)})}};X1.include(n1),r1.include(n1),K1.include(n1),I0.include({toGeoJSON:function(Q){var J=!o(this._latlngs),Y=$1(this._latlngs,J?1:0,!1,Q);return f0(this,{type:(J?"Multi":"")+"LineString",coordinates:Y})}}),C0.include({toGeoJSON:function(Q){var J=!o(this._latlngs),Y=J&&!o(this._latlngs[0]),X=$1(this._latlngs,Y?2:J?1:0,!0,Q);if(!J)X=[X];return f0(this,{type:(Y?"Multi":"")+"Polygon",coordinates:X})}}),S0.include({toMultiPoint:function(Q){var J=[];return this.eachLayer(function(Y){J.push(Y.toGeoJSON(Q).geometry.coordinates)}),f0(this,{type:"MultiPoint",coordinates:J})},toGeoJSON:function(Q){var J=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(J==="MultiPoint")return this.toMultiPoint(Q);var Y=J==="GeometryCollection",X=[];if(this.eachLayer(function(K){if(K.toGeoJSON){var V=K.toGeoJSON(Q);if(Y)X.push(V.geometry);else{var U=W1(V);if(U.type==="FeatureCollection")X.push.apply(X,U.features);else X.push(U)}}}),Y)return f0(this,{geometries:X,type:"GeometryCollection"});return{type:"FeatureCollection",features:X}}});function a5(Q,J){return new E0(Q,J)}var k7=a5,H1=X0.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(Q,J,Y){this._url=Q,this._bounds=v(J),f(this,Y)},onAdd:function(){if(!this._image){if(this._initImage(),this.options.opacity<1)this._updateOpacity()}if(this.options.interactive)h(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image);this.getPane().appendChild(this._image),this._reset()},onRemove:function(){if(P(this._image),this.options.interactive)this.removeInteractiveTarget(this._image)},setOpacity:function(Q){if(this.options.opacity=Q,this._image)this._updateOpacity();return this},setStyle:function(Q){if(Q.opacity)this.setOpacity(Q.opacity);return this},bringToFront:function(){if(this._map)O0(this._image);return this},bringToBack:function(){if(this._map)w0(this._image);return this},setUrl:function(Q){if(this._url=Q,this._image)this._image.src=Q;return this},setBounds:function(Q){if(this._bounds=v(Q),this._map)this._reset();return this},getEvents:function(){var Q={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated)Q.zoomanim=this._animateZoom;return Q},setZIndex:function(Q){return this.options.zIndex=Q,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var Q=this._url.tagName==="IMG",J=this._image=Q?this._url:O("img");if(h(J,"leaflet-image-layer"),this._zoomAnimated)h(J,"leaflet-zoom-animated");if(this.options.className)h(J,this.options.className);if(J.onselectstart=w,J.onmousemove=w,J.onload=A(this.fire,this,"load"),J.onerror=A(this._overlayOnError,this,"error"),this.options.crossOrigin||this.options.crossOrigin==="")J.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin;if(this.options.zIndex)this._updateZIndex();if(Q){this._url=J.src;return}J.src=this._url,J.alt=this.options.alt},_animateZoom:function(Q){var J=this._map.getZoomScale(Q.zoom),Y=this._map._latLngBoundsToNewLayerBounds(this._bounds,Q.zoom,Q.center).min;F0(this._image,Y,J)},_reset:function(){var Q=this._image,J=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),Y=J.getSize();x(Q,J.min),Q.style.width=Y.x+"px",Q.style.height=Y.y+"px"},_updateOpacity:function(){t(this._image,this.options.opacity)},_updateZIndex:function(){if(this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null)this._image.style.zIndex=this.options.zIndex},_overlayOnError:function(){this.fire("error");var Q=this.options.errorOverlayUrl;if(Q&&this._url!==Q)this._url=Q,this._image.src=Q},getCenter:function(){return this._bounds.getCenter()}}),_7=function(Q,J,Y){return new H1(Q,J,Y)},s5=H1.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var Q=this._url.tagName==="VIDEO",J=this._image=Q?this._url:O("video");if(h(J,"leaflet-image-layer"),this._zoomAnimated)h(J,"leaflet-zoom-animated");if(this.options.className)h(J,this.options.className);if(J.onselectstart=w,J.onmousemove=w,J.onloadeddata=A(this.fire,this,"load"),Q){var Y=J.getElementsByTagName("source"),X=[];for(var K=0;K<Y.length;K++)X.push(Y[K].src);this._url=Y.length>0?X:[J.src];return}if(!J0(this._url))this._url=[this._url];if(!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(J.style,"objectFit"))J.style.objectFit="fill";J.autoplay=!!this.options.autoplay,J.loop=!!this.options.loop,J.muted=!!this.options.muted,J.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var U=O("source");U.src=this._url[V],J.appendChild(U)}}});function O7(Q,J,Y){return new s5(Q,J,Y)}var n5=H1.extend({_initImage:function(){var Q=this._image=this._url;if(h(Q,"leaflet-image-layer"),this._zoomAnimated)h(Q,"leaflet-zoom-animated");if(this.options.className)h(Q,this.options.className);Q.onselectstart=w,Q.onmousemove=w}});function w7(Q,J,Y){return new n5(Q,J,Y)}var W0=X0.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(Q,J){if(Q&&(Q instanceof S||J0(Q)))this._latlng=k(Q),f(this,J);else f(this,Q),this._source=J;if(this.options.content)this._content=this.options.content},openOn:function(Q){if(Q=arguments.length?Q:this._source._map,!Q.hasLayer(this))Q.addLayer(this);return this},close:function(){if(this._map)this._map.removeLayer(this);return this},toggle:function(Q){if(this._map)this.close();else{if(arguments.length)this._source=Q;else Q=this._source;this._prepareOpen(),this.openOn(Q._map)}return this},onAdd:function(Q){if(this._zoomAnimated=Q._zoomAnimated,!this._container)this._initLayout();if(Q._fadeAnimated)t(this._container,0);if(clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),Q._fadeAnimated)t(this._container,1);if(this.bringToFront(),this.options.interactive)h(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container)},onRemove:function(Q){if(Q._fadeAnimated)t(this._container,0),this._removeTimeout=setTimeout(A(P,void 0,this._container),200);else P(this._container);if(this.options.interactive)j(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(Q){if(this._latlng=k(Q),this._map)this._updatePosition(),this._adjustPan();return this},getContent:function(){return this._content},setContent:function(Q){return this._content=Q,this.update(),this},getElement:function(){return this._container},update:function(){if(!this._map)return;this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan()},getEvents:function(){var Q={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated)Q.zoomanim=this._animateZoom;return Q},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map)O0(this._container);return this},bringToBack:function(){if(this._map)w0(this._container);return this},_prepareOpen:function(Q){var J=this._source;if(!J._map)return!1;if(J instanceof q0){J=null;var Y=this._source._layers;for(var X in Y)if(Y[X]._map){J=Y[X];break}if(!J)return!1;this._source=J}if(!Q)if(J.getCenter)Q=J.getCenter();else if(J.getLatLng)Q=J.getLatLng();else if(J.getBounds)Q=J.getBounds().getCenter();else throw Error("Unable to get source layer LatLng.");if(this.setLatLng(Q),this._map)this.update();return!0},_updateContent:function(){if(!this._content)return;var Q=this._contentNode,J=typeof this._content==="function"?this._content(this._source||this):this._content;if(typeof J==="string")Q.innerHTML=J;else{while(Q.hasChildNodes())Q.removeChild(Q.firstChild);Q.appendChild(J)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map)return;var Q=this._map.latLngToLayerPoint(this._latlng),J=R(this.options.offset),Y=this._getAnchor();if(this._zoomAnimated)x(this._container,Q.add(Y));else J=J.add(Q).add(Y);var X=this._containerBottom=-J.y,K=this._containerLeft=-Math.round(this._containerWidth/2)+J.x;this._container.style.bottom=X+"px",this._container.style.left=K+"px"},_getAnchor:function(){return[0,0]}});_.include({_initOverlay:function(Q,J,Y,X){var K=J;if(!(K instanceof Q))K=new Q(X).setContent(J);if(Y)K.setLatLng(Y);return K}}),X0.include({_initOverlay:function(Q,J,Y,X){var K=Y;if(K instanceof Q)f(K,X),K._source=this;else K=J&&!X?J:new Q(X,this),K.setContent(Y);return K}});var G1=W0.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(Q){if(Q=arguments.length?Q:this._source._map,!Q.hasLayer(this)&&Q._popup&&Q._popup.options.autoClose)Q.removeLayer(Q._popup);return Q._popup=this,W0.prototype.openOn.call(this,Q)},onAdd:function(Q){if(W0.prototype.onAdd.call(this,Q),Q.fire("popupopen",{popup:this}),this._source){if(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof R0))this._source.on("preclick",h0)}},onRemove:function(Q){if(W0.prototype.onRemove.call(this,Q),Q.fire("popupclose",{popup:this}),this._source){if(this._source.fire("popupclose",{popup:this},!0),!(this._source instanceof R0))this._source.off("preclick",h0)}},getEvents:function(){var Q=W0.prototype.getEvents.call(this);if(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)Q.preclick=this.close;if(this.options.keepInView)Q.moveend=this._adjustPan;return Q},_initLayout:function(){var Q="leaflet-popup",J=this._container=O("div",Q+" "+(this.options.className||"")+" leaflet-zoom-animated"),Y=this._wrapper=O("div",Q+"-content-wrapper",J);if(this._contentNode=O("div",Q+"-content",Y),y0(J),g1(this._contentNode),F(J,"contextmenu",h0),this._tipContainer=O("div",Q+"-tip-container",J),this._tip=O("div",Q+"-tip",this._tipContainer),this.options.closeButton){var X=this._closeButton=O("a",Q+"-close-button",J);X.setAttribute("role","button"),X.setAttribute("aria-label","Close popup"),X.href="#close",X.innerHTML='<span aria-hidden="true">&#215;</span>',F(X,"click",function(K){c(K),this.close()},this)}},_updateLayout:function(){var Q=this._contentNode,J=Q.style;J.width="",J.whiteSpace="nowrap";var Y=Q.offsetWidth;Y=Math.min(Y,this.options.maxWidth),Y=Math.max(Y,this.options.minWidth),J.width=Y+1+"px",J.whiteSpace="",J.height="";var X=Q.offsetHeight,K=this.options.maxHeight,V="leaflet-popup-scrolled";if(K&&X>K)J.height=K+"px",h(Q,V);else j(Q,V);this._containerWidth=this._container.offsetWidth},_animateZoom:function(Q){var J=this._map._latLngToNewLayerPoint(this._latlng,Q.zoom,Q.center),Y=this._getAnchor();x(this._container,J.add(Y))},_adjustPan:function(){if(!this.options.autoPan)return;if(this._map._panAnim)this._map._panAnim.stop();if(this._autopanning){this._autopanning=!1;return}var Q=this._map,J=parseInt(b0(this._container,"marginBottom"),10)||0,Y=this._container.offsetHeight+J,X=this._containerWidth,K=new N(this._containerLeft,-Y-this._containerBottom);K._add(D0(this._container));var V=Q.layerPointToContainerPoint(K),U=R(this.options.autoPanPadding),$=R(this.options.autoPanPaddingTopLeft||U),W=R(this.options.autoPanPaddingBottomRight||U),G=Q.getSize(),q=0,Z=0;if(V.x+X+W.x>G.x)q=V.x+X-G.x+W.x;if(V.x-q-$.x<0)q=V.x-$.x;if(V.y+Y+W.y>G.y)Z=V.y+Y-G.y+W.y;if(V.y-Z-$.y<0)Z=V.y-$.y;if(q||Z){if(this.options.keepInView)this._autopanning=!0;Q.fire("autopanstart").panBy([q,Z])}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),S7=function(Q,J){return new G1(Q,J)};_.mergeOptions({closePopupOnClick:!0}),_.include({openPopup:function(Q,J,Y){return this._initOverlay(G1,Q,J,Y).openOn(this),this},closePopup:function(Q){if(Q=arguments.length?Q:this._popup,Q)Q.close();return this}}),X0.include({bindPopup:function(Q,J){if(this._popup=this._initOverlay(G1,this._popup,Q,J),!this._popupHandlersAdded)this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0;return this},unbindPopup:function(){if(this._popup)this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null;return this},openPopup:function(Q){if(this._popup){if(!(this instanceof q0))this._popup._source=this;if(this._popup._prepareOpen(Q||this._latlng))this._popup.openOn(this._map)}return this},closePopup:function(){if(this._popup)this._popup.close();return this},togglePopup:function(){if(this._popup)this._popup.toggle(this);return this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(Q){if(this._popup)this._popup.setContent(Q);return this},getPopup:function(){return this._popup},_openPopup:function(Q){if(!this._popup||!this._map)return;T0(Q);var J=Q.layer||Q.target;if(this._popup._source===J&&!(J instanceof R0)){if(this._map.hasLayer(this._popup))this.closePopup();else this.openPopup(Q.latlng);return}this._popup._source=J,this.openPopup(Q.latlng)},_movePopup:function(Q){this._popup.setLatLng(Q.latlng)},_onKeyPress:function(Q){if(Q.originalEvent.keyCode===13)this._openPopup(Q)}});var q1=W0.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:0.9},onAdd:function(Q){if(W0.prototype.onAdd.call(this,Q),this.setOpacity(this.options.opacity),Q.fire("tooltipopen",{tooltip:this}),this._source)this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(Q){if(W0.prototype.onRemove.call(this,Q),Q.fire("tooltipclose",{tooltip:this}),this._source)this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var Q=W0.prototype.getEvents.call(this);if(!this.options.permanent)Q.preclick=this.close;return Q},_initLayout:function(){var Q="leaflet-tooltip",J=Q+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=O("div",J),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+D(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(Q){var J,Y,X=this._map,K=this._container,V=X.latLngToContainerPoint(X.getCenter()),U=X.layerPointToContainerPoint(Q),$=this.options.direction,W=K.offsetWidth,G=K.offsetHeight,q=R(this.options.offset),Z=this._getAnchor();if($==="top")J=W/2,Y=G;else if($==="bottom")J=W/2,Y=0;else if($==="center")J=W/2,Y=G/2;else if($==="right")J=0,Y=G/2;else if($==="left")J=W,Y=G/2;else if(U.x<V.x)$="right",J=0,Y=G/2;else $="left",J=W+(q.x+Z.x)*2,Y=G/2;Q=Q.subtract(R(J,Y,!0)).add(q).add(Z),j(K,"leaflet-tooltip-right"),j(K,"leaflet-tooltip-left"),j(K,"leaflet-tooltip-top"),j(K,"leaflet-tooltip-bottom"),h(K,"leaflet-tooltip-"+$),x(K,Q)},_updatePosition:function(){var Q=this._map.latLngToLayerPoint(this._latlng);this._setPosition(Q)},setOpacity:function(Q){if(this.options.opacity=Q,this._container)t(this._container,Q)},_animateZoom:function(Q){var J=this._map._latLngToNewLayerPoint(this._latlng,Q.zoom,Q.center);this._setPosition(J)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),B7=function(Q,J){return new q1(Q,J)};_.include({openTooltip:function(Q,J,Y){return this._initOverlay(q1,Q,J,Y).openOn(this),this},closeTooltip:function(Q){return Q.close(),this}}),X0.include({bindTooltip:function(Q,J){if(this._tooltip&&this.isTooltipOpen())this.unbindTooltip();if(this._tooltip=this._initOverlay(q1,this._tooltip,Q,J),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this))this.openTooltip();return this},unbindTooltip:function(){if(this._tooltip)this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null;return this},_initTooltipInteractions:function(Q){if(!Q&&this._tooltipHandlersAdded)return;var J=Q?"off":"on",Y={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent)if(Y.mouseover=this._openTooltip,Y.mouseout=this.closeTooltip,Y.click=this._openTooltip,this._map)this._addFocusListeners();else Y.add=this._addFocusListeners;else Y.add=this._openTooltip;if(this._tooltip.options.sticky)Y.mousemove=this._moveTooltip;this[J](Y),this._tooltipHandlersAdded=!Q},openTooltip:function(Q){if(this._tooltip){if(!(this instanceof q0))this._tooltip._source=this;if(this._tooltip._prepareOpen(Q)){if(this._tooltip.openOn(this._map),this.getElement)this._setAriaDescribedByOnLayer(this);else if(this.eachLayer)this.eachLayer(this._setAriaDescribedByOnLayer,this)}}return this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){if(this._tooltip)this._tooltip.toggle(this);return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(Q){if(this._tooltip)this._tooltip.setContent(Q);return this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){if(this.getElement)this._addFocusListenersOnLayer(this);else if(this.eachLayer)this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(Q){var J=typeof Q.getElement==="function"&&Q.getElement();if(J)F(J,"focus",function(){this._tooltip._source=Q,this.openTooltip()},this),F(J,"blur",this.closeTooltip,this)},_setAriaDescribedByOnLayer:function(Q){var J=typeof Q.getElement==="function"&&Q.getElement();if(J)J.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(Q){if(!this._tooltip||!this._map)return;if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var J=this;this._map.once("moveend",function(){J._openOnceFlag=!1,J._openTooltip(Q)});return}this._tooltip._source=Q.layer||Q.target,this.openTooltip(this._tooltip.options.sticky?Q.latlng:void 0)},_moveTooltip:function(Q){var J=Q.latlng,Y,X;if(this._tooltip.options.sticky&&Q.originalEvent)Y=this._map.mouseEventToContainerPoint(Q.originalEvent),X=this._map.containerPointToLayerPoint(Y),J=this._map.layerPointToLatLng(X);this._tooltip.setLatLng(J)}});var t5=B0.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(Q){var J=Q&&Q.tagName==="DIV"?Q:document.createElement("div"),Y=this.options;if(Y.html instanceof Element)t0(J),J.appendChild(Y.html);else J.innerHTML=Y.html!==!1?Y.html:"";if(Y.bgPos){var X=R(Y.bgPos);J.style.backgroundPosition=-X.x+"px "+-X.y+"px"}return this._setIconStyles(J,"icon"),J},createShadow:function(){return null}});function C7(Q){return new t5(Q)}B0.Default=p0;var l0=X0.extend({options:{tileSize:256,opacity:1,updateWhenIdle:E.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(Q){f(this,Q)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(Q){Q._addZoomLimit(this)},onRemove:function(Q){this._removeAllTiles(),P(this._container),Q._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){if(this._map)O0(this._container),this._setAutoZIndex(Math.max);return this},bringToBack:function(){if(this._map)w0(this._container),this._setAutoZIndex(Math.min);return this},getContainer:function(){return this._container},setOpacity:function(Q){return this.options.opacity=Q,this._updateOpacity(),this},setZIndex:function(Q){return this.options.zIndex=Q,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var Q=this._clampZoom(this._map.getZoom());if(Q!==this._tileZoom)this._tileZoom=Q,this._updateLevels();this._update()}return this},getEvents:function(){var Q={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove)this._onMove=s(this._onMoveEnd,this.options.updateInterval,this);Q.move=this._onMove}if(this._zoomAnimated)Q.zoomanim=this._animateZoom;return Q},createTile:function(){return document.createElement("div")},getTileSize:function(){var Q=this.options.tileSize;return Q instanceof N?Q:new N(Q,Q)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null)this._container.style.zIndex=this.options.zIndex},_setAutoZIndex:function(Q){var J=this.getPane().children,Y=-Q(-1/0,1/0);for(var X=0,K=J.length,V;X<K;X++)if(V=J[X].style.zIndex,J[X]!==this._container&&V)Y=Q(Y,+V);if(isFinite(Y))this.options.zIndex=Y+Q(-1,1),this._updateZIndex()},_updateOpacity:function(){if(!this._map)return;if(E.ielt9)return;t(this._container,this.options.opacity);var Q=+new Date,J=!1,Y=!1;for(var X in this._tiles){var K=this._tiles[X];if(!K.current||!K.loaded)continue;var V=Math.min(1,(Q-K.loaded)/200);if(t(K.el,V),V<1)J=!0;else{if(K.active)Y=!0;else this._onOpaqueTile(K);K.active=!0}}if(Y&&!this._noPrune)this._pruneTiles();if(J)n(this._fadeFrame),this._fadeFrame=p(this._updateOpacity,this)},_onOpaqueTile:w,_initContainer:function(){if(this._container)return;if(this._container=O("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1)this._updateOpacity();this.getPane().appendChild(this._container)},_updateLevels:function(){var Q=this._tileZoom,J=this.options.maxZoom;if(Q===void 0)return;for(var Y in this._levels)if(Y=Number(Y),this._levels[Y].el.children.length||Y===Q)this._levels[Y].el.style.zIndex=J-Math.abs(Q-Y),this._onUpdateLevel(Y);else P(this._levels[Y].el),this._removeTilesAtZoom(Y),this._onRemoveLevel(Y),delete this._levels[Y];var X=this._levels[Q],K=this._map;if(!X)X=this._levels[Q]={},X.el=O("div","leaflet-tile-container leaflet-zoom-animated",this._container),X.el.style.zIndex=J,X.origin=K.project(K.unproject(K.getPixelOrigin()),Q).round(),X.zoom=Q,this._setZoomTransform(X,K.getCenter(),K.getZoom()),w(X.el.offsetWidth),this._onCreateLevel(X);return this._level=X,X},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(!this._map)return;var Q,J,Y=this._map.getZoom();if(Y>this.options.maxZoom||Y<this.options.minZoom){this._removeAllTiles();return}for(Q in this._tiles)J=this._tiles[Q],J.retain=J.current;for(Q in this._tiles)if(J=this._tiles[Q],J.current&&!J.active){var X=J.coords;if(!this._retainParent(X.x,X.y,X.z,X.z-5))this._retainChildren(X.x,X.y,X.z,X.z+2)}for(Q in this._tiles)if(!this._tiles[Q].retain)this._removeTile(Q)},_removeTilesAtZoom:function(Q){for(var J in this._tiles){if(this._tiles[J].coords.z!==Q)continue;this._removeTile(J)}},_removeAllTiles:function(){for(var Q in this._tiles)this._removeTile(Q)},_invalidateAll:function(){for(var Q in this._levels)P(this._levels[Q].el),this._onRemoveLevel(Number(Q)),delete this._levels[Q];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(Q,J,Y,X){var K=Math.floor(Q/2),V=Math.floor(J/2),U=Y-1,$=new N(+K,+V);$.z=+U;var W=this._tileCoordsToKey($),G=this._tiles[W];if(G&&G.active)return G.retain=!0,!0;else if(G&&G.loaded)G.retain=!0;if(U>X)return this._retainParent(K,V,U,X);return!1},_retainChildren:function(Q,J,Y,X){for(var K=2*Q;K<2*Q+2;K++)for(var V=2*J;V<2*J+2;V++){var U=new N(K,V);U.z=Y+1;var $=this._tileCoordsToKey(U),W=this._tiles[$];if(W&&W.active){W.retain=!0;continue}else if(W&&W.loaded)W.retain=!0;if(Y+1<X)this._retainChildren(K,V,Y+1,X)}},_resetView:function(Q){var J=Q&&(Q.pinch||Q.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),J,J)},_animateZoom:function(Q){this._setView(Q.center,Q.zoom,!0,Q.noUpdate)},_clampZoom:function(Q){var J=this.options;if(J.minNativeZoom!==void 0&&Q<J.minNativeZoom)return J.minNativeZoom;if(J.maxNativeZoom!==void 0&&J.maxNativeZoom<Q)return J.maxNativeZoom;return Q},_setView:function(Q,J,Y,X){var K=Math.round(J);if(this.options.maxZoom!==void 0&&K>this.options.maxZoom||this.options.minZoom!==void 0&&K<this.options.minZoom)K=void 0;else K=this._clampZoom(K);var V=this.options.updateWhenZooming&&K!==this._tileZoom;if(!X||V){if(this._tileZoom=K,this._abortLoading)this._abortLoading();if(this._updateLevels(),this._resetGrid(),K!==void 0)this._update(Q);if(!Y)this._pruneTiles();this._noPrune=!!Y}this._setZoomTransforms(Q,J)},_setZoomTransforms:function(Q,J){for(var Y in this._levels)this._setZoomTransform(this._levels[Y],Q,J)},_setZoomTransform:function(Q,J,Y){var X=this._map.getZoomScale(Y,Q.zoom),K=Q.origin.multiplyBy(X).subtract(this._map._getNewPixelOrigin(J,Y)).round();if(E.any3d)F0(Q.el,K,X);else x(Q.el,K)},_resetGrid:function(){var Q=this._map,J=Q.options.crs,Y=this._tileSize=this.getTileSize(),X=this._tileZoom,K=this._map.getPixelWorldBounds(this._tileZoom);if(K)this._globalTileRange=this._pxBoundsToTileRange(K);this._wrapX=J.wrapLng&&!this.options.noWrap&&[Math.floor(Q.project([0,J.wrapLng[0]],X).x/Y.x),Math.ceil(Q.project([0,J.wrapLng[1]],X).x/Y.y)],this._wrapY=J.wrapLat&&!this.options.noWrap&&[Math.floor(Q.project([J.wrapLat[0],0],X).y/Y.x),Math.ceil(Q.project([J.wrapLat[1],0],X).y/Y.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom)return;this._update()},_getTiledPixelBounds:function(Q){var J=this._map,Y=J._animatingZoom?Math.max(J._animateToZoom,J.getZoom()):J.getZoom(),X=J.getZoomScale(Y,this._tileZoom),K=J.project(Q,this._tileZoom).floor(),V=J.getSize().divideBy(X*2);return new z(K.subtract(V),K.add(V))},_update:function(Q){var J=this._map;if(!J)return;var Y=this._clampZoom(J.getZoom());if(Q===void 0)Q=J.getCenter();if(this._tileZoom===void 0)return;var X=this._getTiledPixelBounds(Q),K=this._pxBoundsToTileRange(X),V=K.getCenter(),U=[],$=this.options.keepBuffer,W=new z(K.getBottomLeft().subtract([$,-$]),K.getTopRight().add([$,-$]));if(!(isFinite(K.min.x)&&isFinite(K.min.y)&&isFinite(K.max.x)&&isFinite(K.max.y)))throw Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var q=this._tiles[G].coords;if(q.z!==this._tileZoom||!W.contains(new N(q.x,q.y)))this._tiles[G].current=!1}if(Math.abs(Y-this._tileZoom)>1){this._setView(Q,Y);return}for(var Z=K.min.y;Z<=K.max.y;Z++)for(var T=K.min.x;T<=K.max.x;T++){var m=new N(T,Z);if(m.z=this._tileZoom,!this._isValidTile(m))continue;var g=this._tiles[this._tileCoordsToKey(m)];if(g)g.current=!0;else U.push(m)}if(U.sort(function(r,P0){return r.distanceTo(V)-P0.distanceTo(V)}),U.length!==0){if(!this._loading)this._loading=!0,this.fire("loading");var e=document.createDocumentFragment();for(T=0;T<U.length;T++)this._addTile(U[T],e);this._level.el.appendChild(e)}},_isValidTile:function(Q){var J=this._map.options.crs;if(!J.infinite){var Y=this._globalTileRange;if(!J.wrapLng&&(Q.x<Y.min.x||Q.x>Y.max.x)||!J.wrapLat&&(Q.y<Y.min.y||Q.y>Y.max.y))return!1}if(!this.options.bounds)return!0;var X=this._tileCoordsToBounds(Q);return v(this.options.bounds).overlaps(X)},_keyToBounds:function(Q){return this._tileCoordsToBounds(this._keyToTileCoords(Q))},_tileCoordsToNwSe:function(Q){var J=this._map,Y=this.getTileSize(),X=Q.scaleBy(Y),K=X.add(Y),V=J.unproject(X,Q.z),U=J.unproject(K,Q.z);return[V,U]},_tileCoordsToBounds:function(Q){var J=this._tileCoordsToNwSe(Q),Y=new i(J[0],J[1]);if(!this.options.noWrap)Y=this._map.wrapLatLngBounds(Y);return Y},_tileCoordsToKey:function(Q){return Q.x+":"+Q.y+":"+Q.z},_keyToTileCoords:function(Q){var J=Q.split(":"),Y=new N(+J[0],+J[1]);return Y.z=+J[2],Y},_removeTile:function(Q){var J=this._tiles[Q];if(!J)return;P(J.el),delete this._tiles[Q],this.fire("tileunload",{tile:J.el,coords:this._keyToTileCoords(Q)})},_initTile:function(Q){h(Q,"leaflet-tile");var J=this.getTileSize();if(Q.style.width=J.x+"px",Q.style.height=J.y+"px",Q.onselectstart=w,Q.onmousemove=w,E.ielt9&&this.options.opacity<1)t(Q,this.options.opacity)},_addTile:function(Q,J){var Y=this._getTilePos(Q),X=this._tileCoordsToKey(Q),K=this.createTile(this._wrapCoords(Q),A(this._tileReady,this,Q));if(this._initTile(K),this.createTile.length<2)p(A(this._tileReady,this,Q,null,K));x(K,Y),this._tiles[X]={el:K,coords:Q,current:!0},J.appendChild(K),this.fire("tileloadstart",{tile:K,coords:Q})},_tileReady:function(Q,J,Y){if(J)this.fire("tileerror",{error:J,tile:Y,coords:Q});var X=this._tileCoordsToKey(Q);if(Y=this._tiles[X],!Y)return;if(Y.loaded=+new Date,this._map._fadeAnimated)t(Y.el,0),n(this._fadeFrame),this._fadeFrame=p(this._updateOpacity,this);else Y.active=!0,this._pruneTiles();if(!J)h(Y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:Y.el,coords:Q});if(this._noTilesToLoad())if(this._loading=!1,this.fire("load"),E.ielt9||!this._map._fadeAnimated)p(this._pruneTiles,this);else setTimeout(A(this._pruneTiles,this),250)},_getTilePos:function(Q){return Q.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(Q){var J=new N(this._wrapX?y(Q.x,this._wrapX):Q.x,this._wrapY?y(Q.y,this._wrapY):Q.y);return J.z=Q.z,J},_pxBoundsToTileRange:function(Q){var J=this.getTileSize();return new z(Q.min.unscaleBy(J).floor(),Q.max.unscaleBy(J).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var Q in this._tiles)if(!this._tiles[Q].loaded)return!1;return!0}});function f7(Q){return new l0(Q)}var z0=l0.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(Q,J){if(this._url=Q,J=f(this,J),J.detectRetina&&E.retina&&J.maxZoom>0){if(J.tileSize=Math.floor(J.tileSize/2),!J.zoomReverse)J.zoomOffset++,J.maxZoom=Math.max(J.minZoom,J.maxZoom-1);else J.zoomOffset--,J.minZoom=Math.min(J.maxZoom,J.minZoom+1);J.minZoom=Math.max(0,J.minZoom)}else if(!J.zoomReverse)J.maxZoom=Math.max(J.minZoom,J.maxZoom);else J.minZoom=Math.min(J.maxZoom,J.minZoom);if(typeof J.subdomains==="string")J.subdomains=J.subdomains.split("");this.on("tileunload",this._onTileRemove)},setUrl:function(Q,J){if(this._url===Q&&J===void 0)J=!0;if(this._url=Q,!J)this.redraw();return this},createTile:function(Q,J){var Y=document.createElement("img");if(F(Y,"load",A(this._tileOnLoad,this,J,Y)),F(Y,"error",A(this._tileOnError,this,J,Y)),this.options.crossOrigin||this.options.crossOrigin==="")Y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin;if(typeof this.options.referrerPolicy==="string")Y.referrerPolicy=this.options.referrerPolicy;return Y.alt="",Y.src=this.getTileUrl(Q),Y},getTileUrl:function(Q){var J={r:E.retina?"@2x":"",s:this._getSubdomain(Q),x:Q.x,y:Q.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var Y=this._globalTileRange.max.y-Q.y;if(this.options.tms)J.y=Y;J["-y"]=Y}return e1(this._url,I(J,this.options))},_tileOnLoad:function(Q,J){if(E.ielt9)setTimeout(A(Q,this,null,J),0);else Q(null,J)},_tileOnError:function(Q,J,Y){var X=this.options.errorTileUrl;if(X&&J.getAttribute("src")!==X)J.src=X;Q(Y,J)},_onTileRemove:function(Q){Q.tile.onload=null},_getZoomForUrl:function(){var Q=this._tileZoom,J=this.options.maxZoom,Y=this.options.zoomReverse,X=this.options.zoomOffset;if(Y)Q=J-Q;return Q+X},_getSubdomain:function(Q){var J=Math.abs(Q.x+Q.y)%this.options.subdomains.length;return this.options.subdomains[J]},_abortLoading:function(){var Q,J;for(Q in this._tiles)if(this._tiles[Q].coords.z!==this._tileZoom){if(J=this._tiles[Q].el,J.onload=w,J.onerror=w,!J.complete){J.src=a0;var Y=this._tiles[Q].coords;P(J),delete this._tiles[Q],this.fire("tileabort",{tile:J,coords:Y})}}},_removeTile:function(Q){var J=this._tiles[Q];if(!J)return;return J.el.setAttribute("src",a0),l0.prototype._removeTile.call(this,Q)},_tileReady:function(Q,J,Y){if(!this._map||Y&&Y.getAttribute("src")===a0)return;return l0.prototype._tileReady.call(this,Q,J,Y)}});function o5(Q,J){return new z0(Q,J)}var e5=z0.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(Q,J){this._url=Q;var Y=I({},this.defaultWmsParams);for(var X in J)if(!(X in this.options))Y[X]=J[X];J=f(this,J);var K=J.detectRetina&&E.retina?2:1,V=this.getTileSize();Y.width=V.x*K,Y.height=V.y*K,this.wmsParams=Y},onAdd:function(Q){this._crs=this.options.crs||Q.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var J=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[J]=this._crs.code,z0.prototype.onAdd.call(this,Q)},getTileUrl:function(Q){var J=this._tileCoordsToNwSe(Q),Y=this._crs,X=l(Y.project(J[0]),Y.project(J[1])),K=X.min,V=X.max,U=(this._wmsVersion>=1.3&&this._crs===l5?[K.y,K.x,V.y,V.x]:[K.x,K.y,V.x,V.y]).join(","),$=z0.prototype.getTileUrl.call(this,Q);return $+o1(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(Q,J){if(I(this.wmsParams,Q),!J)this.redraw();return this}});function z7(Q,J){return new e5(Q,J)}z0.WMS=e5,o5.wms=z7;var M0=X0.extend({options:{padding:0.1},initialize:function(Q){f(this,Q),D(this),this._layers=this._layers||{}},onAdd:function(){if(!this._container)this._initContainer(),h(this._container,"leaflet-zoom-animated");this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var Q={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};if(this._zoomAnimated)Q.zoomanim=this._onAnimZoom;return Q},_onAnimZoom:function(Q){this._updateTransform(Q.center,Q.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(Q,J){var Y=this._map.getZoomScale(J,this._zoom),X=this._map.getSize().multiplyBy(0.5+this.options.padding),K=this._map.project(this._center,J),V=X.multiplyBy(-Y).add(K).subtract(this._map._getNewPixelOrigin(Q,J));if(E.any3d)F0(this._container,V,Y);else x(this._container,V)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var Q in this._layers)this._layers[Q]._reset()},_onZoomEnd:function(){for(var Q in this._layers)this._layers[Q]._project()},_updatePaths:function(){for(var Q in this._layers)this._layers[Q]._update()},_update:function(){var Q=this.options.padding,J=this._map.getSize(),Y=this._map.containerPointToLayerPoint(J.multiplyBy(-Q)).round();this._bounds=new z(Y,Y.add(J.multiplyBy(1+Q*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Q6=M0.extend({options:{tolerance:0},getEvents:function(){var Q=M0.prototype.getEvents.call(this);return Q.viewprereset=this._onViewPreReset,Q},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){M0.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var Q=this._container=document.createElement("canvas");F(Q,"mousemove",this._onMouseMove,this),F(Q,"click dblclick mousedown mouseup contextmenu",this._onClick,this),F(Q,"mouseout",this._handleMouseOut,this),Q._leaflet_disable_events=!0,this._ctx=Q.getContext("2d")},_destroyContainer:function(){n(this._redrawRequest),delete this._ctx,P(this._container),C(this._container),delete this._container},_updatePaths:function(){if(this._postponeUpdatePaths)return;var Q;this._redrawBounds=null;for(var J in this._layers)Q=this._layers[J],Q._update();this._redraw()},_update:function(){if(this._map._animatingZoom&&this._bounds)return;M0.prototype._update.call(this);var Q=this._bounds,J=this._container,Y=Q.getSize(),X=E.retina?2:1;if(x(J,Q.min),J.width=X*Y.x,J.height=X*Y.y,J.style.width=Y.x+"px",J.style.height=Y.y+"px",E.retina)this._ctx.scale(2,2);this._ctx.translate(-Q.min.x,-Q.min.y),this.fire("update")},_reset:function(){if(M0.prototype._reset.call(this),this._postponeUpdatePaths)this._postponeUpdatePaths=!1,this._updatePaths()},_initPath:function(Q){this._updateDashArray(Q),this._layers[D(Q)]=Q;var J=Q._order={layer:Q,prev:this._drawLast,next:null};if(this._drawLast)this._drawLast.next=J;this._drawLast=J,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(Q){this._requestRedraw(Q)},_removePath:function(Q){var J=Q._order,Y=J.next,X=J.prev;if(Y)Y.prev=X;else this._drawLast=X;if(X)X.next=Y;else this._drawFirst=Y;delete Q._order,delete this._layers[D(Q)],this._requestRedraw(Q)},_updatePath:function(Q){this._extendRedrawBounds(Q),Q._project(),Q._update(),this._requestRedraw(Q)},_updateStyle:function(Q){this._updateDashArray(Q),this._requestRedraw(Q)},_updateDashArray:function(Q){if(typeof Q.options.dashArray==="string"){var J=Q.options.dashArray.split(/[, ]+/),Y=[],X,K;for(K=0;K<J.length;K++){if(X=Number(J[K]),isNaN(X))return;Y.push(X)}Q.options._dashArray=Y}else Q.options._dashArray=Q.options.dashArray},_requestRedraw:function(Q){if(!this._map)return;this._extendRedrawBounds(Q),this._redrawRequest=this._redrawRequest||p(this._redraw,this)},_extendRedrawBounds:function(Q){if(Q._pxBounds){var J=(Q.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(Q._pxBounds.min.subtract([J,J])),this._redrawBounds.extend(Q._pxBounds.max.add([J,J]))}},_redraw:function(){if(this._redrawRequest=null,this._redrawBounds)this._redrawBounds.min._floor(),this._redrawBounds.max._ceil();this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var Q=this._redrawBounds;if(Q){var J=Q.getSize();this._ctx.clearRect(Q.min.x,Q.min.y,J.x,J.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var Q,J=this._redrawBounds;if(this._ctx.save(),J){var Y=J.getSize();this._ctx.beginPath(),this._ctx.rect(J.min.x,J.min.y,Y.x,Y.y),this._ctx.clip()}this._drawing=!0;for(var X=this._drawFirst;X;X=X.next)if(Q=X.layer,!J||Q._pxBounds&&Q._pxBounds.intersects(J))Q._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(Q,J){if(!this._drawing)return;var Y,X,K,V,U=Q._parts,$=U.length,W=this._ctx;if(!$)return;W.beginPath();for(Y=0;Y<$;Y++){for(X=0,K=U[Y].length;X<K;X++)V=U[Y][X],W[X?"lineTo":"moveTo"](V.x,V.y);if(J)W.closePath()}this._fillStroke(W,Q)},_updateCircle:function(Q){if(!this._drawing||Q._empty())return;var J=Q._point,Y=this._ctx,X=Math.max(Math.round(Q._radius),1),K=(Math.max(Math.round(Q._radiusY),1)||X)/X;if(K!==1)Y.save(),Y.scale(1,K);if(Y.beginPath(),Y.arc(J.x,J.y/K,X,0,Math.PI*2,!1),K!==1)Y.restore();this._fillStroke(Y,Q)},_fillStroke:function(Q,J){var Y=J.options;if(Y.fill)Q.globalAlpha=Y.fillOpacity,Q.fillStyle=Y.fillColor||Y.color,Q.fill(Y.fillRule||"evenodd");if(Y.stroke&&Y.weight!==0){if(Q.setLineDash)Q.setLineDash(J.options&&J.options._dashArray||[]);Q.globalAlpha=Y.opacity,Q.lineWidth=Y.weight,Q.strokeStyle=Y.color,Q.lineCap=Y.lineCap,Q.lineJoin=Y.lineJoin,Q.stroke()}},_onClick:function(Q){var J=this._map.mouseEventToLayerPoint(Q),Y,X;for(var K=this._drawFirst;K;K=K.next)if(Y=K.layer,Y.options.interactive&&Y._containsPoint(J)){if(!(Q.type==="click"||Q.type==="preclick")||!this._map._draggableMoved(Y))X=Y}this._fireEvent(X?[X]:!1,Q)},_onMouseMove:function(Q){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom)return;var J=this._map.mouseEventToLayerPoint(Q);this._handleMouseHover(Q,J)},_handleMouseOut:function(Q){var J=this._hoveredLayer;if(J)j(this._container,"leaflet-interactive"),this._fireEvent([J],Q,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1},_handleMouseHover:function(Q,J){if(this._mouseHoverThrottled)return;var Y,X;for(var K=this._drawFirst;K;K=K.next)if(Y=K.layer,Y.options.interactive&&Y._containsPoint(J))X=Y;if(X!==this._hoveredLayer){if(this._handleMouseOut(Q),X)h(this._container,"leaflet-interactive"),this._fireEvent([X],Q,"mouseover"),this._hoveredLayer=X}this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,Q),this._mouseHoverThrottled=!0,setTimeout(A(function(){this._mouseHoverThrottled=!1},this),32)},_fireEvent:function(Q,J,Y){this._map._fireDOMEvent(J,Y||J.type,Q)},_bringToFront:function(Q){var J=Q._order;if(!J)return;var{next:Y,prev:X}=J;if(Y)Y.prev=X;else return;if(X)X.next=Y;else if(Y)this._drawFirst=Y;J.prev=this._drawLast,this._drawLast.next=J,J.next=null,this._drawLast=J,this._requestRedraw(Q)},_bringToBack:function(Q){var J=Q._order;if(!J)return;var{next:Y,prev:X}=J;if(X)X.next=Y;else return;if(Y)Y.prev=X;else if(X)this._drawLast=X;J.prev=null,J.next=this._drawFirst,this._drawFirst.prev=J,this._drawFirst=J,this._requestRedraw(Q)}});function J6(Q){return E.canvas?new Q6(Q):null}var i0=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(Q){return document.createElement("<lvml:"+Q+' class="lvml">')}}catch(Q){}return function(Q){return document.createElement("<"+Q+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),P7={_initContainer:function(){this._container=O("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom)return;M0.prototype._update.call(this),this.fire("update")},_initPath:function(Q){var J=Q._container=i0("shape");h(J,"leaflet-vml-shape "+(this.options.className||"")),J.coordsize="1 1",Q._path=i0("path"),J.appendChild(Q._path),this._updateStyle(Q),this._layers[D(Q)]=Q},_addPath:function(Q){var J=Q._container;if(this._container.appendChild(J),Q.options.interactive)Q.addInteractiveTarget(J)},_removePath:function(Q){var J=Q._container;P(J),Q.removeInteractiveTarget(J),delete this._layers[D(Q)]},_updateStyle:function(Q){var{_stroke:J,_fill:Y,options:X,_container:K}=Q;if(K.stroked=!!X.stroke,K.filled=!!X.fill,X.stroke){if(!J)J=Q._stroke=i0("stroke");if(K.appendChild(J),J.weight=X.weight+"px",J.color=X.color,J.opacity=X.opacity,X.dashArray)J.dashStyle=J0(X.dashArray)?X.dashArray.join(" "):X.dashArray.replace(/( *, *)/g," ");else J.dashStyle="";J.endcap=X.lineCap.replace("butt","flat"),J.joinstyle=X.lineJoin}else if(J)K.removeChild(J),Q._stroke=null;if(X.fill){if(!Y)Y=Q._fill=i0("fill");K.appendChild(Y),Y.color=X.fillColor||X.color,Y.opacity=X.fillOpacity}else if(Y)K.removeChild(Y),Q._fill=null},_updateCircle:function(Q){var J=Q._point.round(),Y=Math.round(Q._radius),X=Math.round(Q._radiusY||Y);this._setPath(Q,Q._empty()?"M0 0":"AL "+J.x+","+J.y+" "+Y+","+X+" 0,23592600")},_setPath:function(Q,J){Q._path.v=J},_bringToFront:function(Q){O0(Q._container)},_bringToBack:function(Q){w0(Q._container)}},I1=E.vml?i0:V5,r0=M0.extend({_initContainer:function(){this._container=I1("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=I1("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){P(this._container),C(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(this._map._animatingZoom&&this._bounds)return;M0.prototype._update.call(this);var Q=this._bounds,J=Q.getSize(),Y=this._container;if(!this._svgSize||!this._svgSize.equals(J))this._svgSize=J,Y.setAttribute("width",J.x),Y.setAttribute("height",J.y);x(Y,Q.min),Y.setAttribute("viewBox",[Q.min.x,Q.min.y,J.x,J.y].join(" ")),this.fire("update")},_initPath:function(Q){var J=Q._path=I1("path");if(Q.options.className)h(J,Q.options.className);if(Q.options.interactive)h(J,"leaflet-interactive");this._updateStyle(Q),this._layers[D(Q)]=Q},_addPath:function(Q){if(!this._rootGroup)this._initContainer();this._rootGroup.appendChild(Q._path),Q.addInteractiveTarget(Q._path)},_removePath:function(Q){P(Q._path),Q.removeInteractiveTarget(Q._path),delete this._layers[D(Q)]},_updatePath:function(Q){Q._project(),Q._update()},_updateStyle:function(Q){var{_path:J,options:Y}=Q;if(!J)return;if(Y.stroke){if(J.setAttribute("stroke",Y.color),J.setAttribute("stroke-opacity",Y.opacity),J.setAttribute("stroke-width",Y.weight),J.setAttribute("stroke-linecap",Y.lineCap),J.setAttribute("stroke-linejoin",Y.lineJoin),Y.dashArray)J.setAttribute("stroke-dasharray",Y.dashArray);else J.removeAttribute("stroke-dasharray");if(Y.dashOffset)J.setAttribute("stroke-dashoffset",Y.dashOffset);else J.removeAttribute("stroke-dashoffset")}else J.setAttribute("stroke","none");if(Y.fill)J.setAttribute("fill",Y.fillColor||Y.color),J.setAttribute("fill-opacity",Y.fillOpacity),J.setAttribute("fill-rule",Y.fillRule||"evenodd");else J.setAttribute("fill","none")},_updatePoly:function(Q,J){this._setPath(Q,U5(Q._parts,J))},_updateCircle:function(Q){var J=Q._point,Y=Math.max(Math.round(Q._radius),1),X=Math.max(Math.round(Q._radiusY),1)||Y,K="a"+Y+","+X+" 0 1,0 ",V=Q._empty()?"M0 0":"M"+(J.x-Y)+","+J.y+K+Y*2+",0 "+K+-Y*2+",0 ";this._setPath(Q,V)},_setPath:function(Q,J){Q._path.setAttribute("d",J)},_bringToFront:function(Q){O0(Q._path)},_bringToBack:function(Q){w0(Q._path)}});if(E.vml)r0.include(P7);function Y6(Q){return E.svg||E.vml?new r0(Q):null}_.include({getRenderer:function(Q){var J=Q.options.renderer||this._getPaneRenderer(Q.options.pane)||this.options.renderer||this._renderer;if(!J)J=this._renderer=this._createRenderer();if(!this.hasLayer(J))this.addLayer(J);return J},_getPaneRenderer:function(Q){if(Q==="overlayPane"||Q===void 0)return!1;var J=this._paneRenderers[Q];if(J===void 0)J=this._createRenderer({pane:Q}),this._paneRenderers[Q]=J;return J},_createRenderer:function(Q){return this.options.preferCanvas&&J6(Q)||Y6(Q)}});var X6=C0.extend({initialize:function(Q,J){C0.prototype.initialize.call(this,this._boundsToLatLngs(Q),J)},setBounds:function(Q){return this.setLatLngs(this._boundsToLatLngs(Q))},_boundsToLatLngs:function(Q){return Q=v(Q),[Q.getSouthWest(),Q.getNorthWest(),Q.getNorthEast(),Q.getSouthEast()]}});function j7(Q,J){return new X6(Q,J)}r0.create=I1,r0.pointsToPath=U5,E0.geometryToLayer=V1,E0.coordsToLatLng=a1,E0.coordsToLatLngs=U1,E0.latLngToCoords=s1,E0.latLngsToCoords=$1,E0.getFeature=f0,E0.asFeature=W1,_.mergeOptions({boxZoom:!0});var K6=$0.extend({initialize:function(Q){this._map=Q,this._container=Q._container,this._pane=Q._panes.overlayPane,this._resetStateTimeout=0,Q.on("unload",this._destroy,this)},addHooks:function(){F(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){C(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){P(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){if(this._resetStateTimeout!==0)clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0},_onMouseDown:function(Q){if(!Q.shiftKey||Q.which!==1&&Q.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),u0(),z1(),this._startPoint=this._map.mouseEventToContainerPoint(Q),F(document,{contextmenu:T0,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(Q){if(!this._moved)this._moved=!0,this._box=O("div","leaflet-zoom-box",this._container),h(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart");this._point=this._map.mouseEventToContainerPoint(Q);var J=new z(this._point,this._startPoint),Y=J.getSize();x(this._box,J.min),this._box.style.width=Y.x+"px",this._box.style.height=Y.y+"px"},_finish:function(){if(this._moved)P(this._box),j(this._container,"leaflet-crosshair");g0(),P1(),C(document,{contextmenu:T0,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(Q){if(Q.which!==1&&Q.button!==1)return;if(this._finish(),!this._moved)return;this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(A(this._resetState,this),0);var J=new i(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(J).fire("boxzoomend",{boxZoomBounds:J})},_onKeyDown:function(Q){if(Q.keyCode===27)this._finish(),this._clearDeferredResetState(),this._resetState()}});_.addInitHook("addHandler","boxZoom",K6),_.mergeOptions({doubleClickZoom:!0});var V6=$0.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(Q){var J=this._map,Y=J.getZoom(),X=J.options.zoomDelta,K=Q.originalEvent.shiftKey?Y-X:Y+X;if(J.options.doubleClickZoom==="center")J.setZoom(K);else J.setZoomAround(Q.containerPoint,K)}});_.addInitHook("addHandler","doubleClickZoom",V6),_.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0});var U6=$0.extend({addHooks:function(){if(!this._draggable){var Q=this._map;if(this._draggable=new A0(Q._mapPane,Q._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),Q.options.worldCopyJump)this._draggable.on("predrag",this._onPreDragWrap,this),Q.on("zoomend",this._onZoomEnd,this),Q.whenReady(this._onZoomEnd,this)}h(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){j(this._map._container,"leaflet-grab"),j(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var Q=this._map;if(Q._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var J=v(this._map.options.maxBounds);this._offsetLimit=l(this._map.latLngToContainerPoint(J.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(J.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;if(Q.fire("movestart").fire("dragstart"),Q.options.inertia)this._positions=[],this._times=[]},_onDrag:function(Q){if(this._map.options.inertia){var J=this._lastTime=+new Date,Y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(Y),this._times.push(J),this._prunePositions(J)}this._map.fire("move",Q).fire("drag",Q)},_prunePositions:function(Q){while(this._positions.length>1&&Q-this._times[0]>50)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var Q=this._map.getSize().divideBy(2),J=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=J.subtract(Q).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(Q,J){return Q-(Q-J)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit)return;var Q=this._draggable._newPos.subtract(this._draggable._startPos),J=this._offsetLimit;if(Q.x<J.min.x)Q.x=this._viscousLimit(Q.x,J.min.x);if(Q.y<J.min.y)Q.y=this._viscousLimit(Q.y,J.min.y);if(Q.x>J.max.x)Q.x=this._viscousLimit(Q.x,J.max.x);if(Q.y>J.max.y)Q.y=this._viscousLimit(Q.y,J.max.y);this._draggable._newPos=this._draggable._startPos.add(Q)},_onPreDragWrap:function(){var Q=this._worldWidth,J=Math.round(Q/2),Y=this._initialWorldOffset,X=this._draggable._newPos.x,K=(X-J+Y)%Q+J-Y,V=(X+J+Y)%Q-J-Y,U=Math.abs(K+Y)<Math.abs(V+Y)?K:V;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(Q){var J=this._map,Y=J.options,X=!Y.inertia||Q.noInertia||this._times.length<2;if(J.fire("dragend",Q),X)J.fire("moveend");else{this._prunePositions(+new Date);var K=this._lastPos.subtract(this._positions[0]),V=(this._lastTime-this._times[0])/1000,U=Y.easeLinearity,$=K.multiplyBy(U/V),W=$.distanceTo([0,0]),G=Math.min(Y.inertiaMaxSpeed,W),q=$.multiplyBy(G/W),Z=G/(Y.inertiaDeceleration*U),T=q.multiplyBy(-Z/2).round();if(!T.x&&!T.y)J.fire("moveend");else T=J._limitOffset(T,J.options.maxBounds),p(function(){J.panBy(T,{duration:Z,easeLinearity:U,noMoveStart:!0,animate:!0})})}}});_.addInitHook("addHandler","dragging",U6),_.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $6=$0.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(Q){this._map=Q,this._setPanDelta(Q.options.keyboardPanDelta),this._setZoomDelta(Q.options.zoomDelta)},addHooks:function(){var Q=this._map._container;if(Q.tabIndex<=0)Q.tabIndex="0";F(Q,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),C(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused)return;var{body:Q,documentElement:J}=document,Y=Q.scrollTop||J.scrollTop,X=Q.scrollLeft||J.scrollLeft;this._map._container.focus(),window.scrollTo(X,Y)},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(Q){var J=this._panKeys={},Y=this.keyCodes,X,K;for(X=0,K=Y.left.length;X<K;X++)J[Y.left[X]]=[-1*Q,0];for(X=0,K=Y.right.length;X<K;X++)J[Y.right[X]]=[Q,0];for(X=0,K=Y.down.length;X<K;X++)J[Y.down[X]]=[0,Q];for(X=0,K=Y.up.length;X<K;X++)J[Y.up[X]]=[0,-1*Q]},_setZoomDelta:function(Q){var J=this._zoomKeys={},Y=this.keyCodes,X,K;for(X=0,K=Y.zoomIn.length;X<K;X++)J[Y.zoomIn[X]]=Q;for(X=0,K=Y.zoomOut.length;X<K;X++)J[Y.zoomOut[X]]=-Q},_addHooks:function(){F(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){C(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(Q){if(Q.altKey||Q.ctrlKey||Q.metaKey)return;var J=Q.keyCode,Y=this._map,X;if(J in this._panKeys){if(!Y._panAnim||!Y._panAnim._inProgress){if(X=this._panKeys[J],Q.shiftKey)X=R(X).multiplyBy(3);if(Y.options.maxBounds)X=Y._limitOffset(R(X),Y.options.maxBounds);if(Y.options.worldCopyJump){var K=Y.wrapLatLng(Y.unproject(Y.project(Y.getCenter()).add(X)));Y.panTo(K)}else Y.panBy(X)}}else if(J in this._zoomKeys)Y.setZoom(Y.getZoom()+(Q.shiftKey?3:1)*this._zoomKeys[J]);else if(J===27&&Y._popup&&Y._popup.options.closeOnEscapeKey)Y.closePopup();else return;T0(Q)}});_.addInitHook("addHandler","keyboard",$6),_.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var W6=$0.extend({addHooks:function(){F(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){C(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(Q){var J=P5(Q),Y=this._map.options.wheelDebounceTime;if(this._delta+=J,this._lastMousePos=this._map.mouseEventToContainerPoint(Q),!this._startTime)this._startTime=+new Date;var X=Math.max(Y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(A(this._performZoom,this),X),T0(Q)},_performZoom:function(){var Q=this._map,J=Q.getZoom(),Y=this._map.options.zoomSnap||0;Q._stop();var X=this._delta/(this._map.options.wheelPxPerZoomLevel*4),K=4*Math.log(2/(1+Math.exp(-Math.abs(X))))/Math.LN2,V=Y?Math.ceil(K/Y)*Y:K,U=Q._limitZoom(J+(this._delta>0?V:-V))-J;if(this._delta=0,this._startTime=null,!U)return;if(Q.options.scrollWheelZoom==="center")Q.setZoom(J+U);else Q.setZoomAround(this._lastMousePos,J+U)}});_.addInitHook("addHandler","scrollWheelZoom",W6);var v7=600;_.mergeOptions({tapHold:E.touchNative&&E.safari&&E.mobile,tapTolerance:15});var H6=$0.extend({addHooks:function(){F(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){C(this._map._container,"touchstart",this._onDown,this)},_onDown:function(Q){if(clearTimeout(this._holdTimeout),Q.touches.length!==1)return;var J=Q.touches[0];this._startPos=this._newPos=new N(J.clientX,J.clientY),this._holdTimeout=setTimeout(A(function(){if(this._cancel(),!this._isTapValid())return;F(document,"touchend",c),F(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",J)},this),v7),F(document,"touchend touchcancel contextmenu",this._cancel,this),F(document,"touchmove",this._onMove,this)},_cancelClickPrevent:function Q(){C(document,"touchend",c),C(document,"touchend touchcancel",Q)},_cancel:function(){clearTimeout(this._holdTimeout),C(document,"touchend touchcancel contextmenu",this._cancel,this),C(document,"touchmove",this._onMove,this)},_onMove:function(Q){var J=Q.touches[0];this._newPos=new N(J.clientX,J.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(Q,J){var Y=new MouseEvent(Q,{bubbles:!0,cancelable:!0,view:window,screenX:J.screenX,screenY:J.screenY,clientX:J.clientX,clientY:J.clientY});Y._simulated=!0,J.target.dispatchEvent(Y)}});_.addInitHook("addHandler","tapHold",H6),_.mergeOptions({touchZoom:E.touch,bounceAtZoomLimits:!0});var G6=$0.extend({addHooks:function(){h(this._map._container,"leaflet-touch-zoom"),F(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){j(this._map._container,"leaflet-touch-zoom"),C(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(Q){var J=this._map;if(!Q.touches||Q.touches.length!==2||J._animatingZoom||this._zooming)return;var Y=J.mouseEventToContainerPoint(Q.touches[0]),X=J.mouseEventToContainerPoint(Q.touches[1]);if(this._centerPoint=J.getSize()._divideBy(2),this._startLatLng=J.containerPointToLatLng(this._centerPoint),J.options.touchZoom!=="center")this._pinchStartLatLng=J.containerPointToLatLng(Y.add(X)._divideBy(2));this._startDist=Y.distanceTo(X),this._startZoom=J.getZoom(),this._moved=!1,this._zooming=!0,J._stop(),F(document,"touchmove",this._onTouchMove,this),F(document,"touchend touchcancel",this._onTouchEnd,this),c(Q)},_onTouchMove:function(Q){if(!Q.touches||Q.touches.length!==2||!this._zooming)return;var J=this._map,Y=J.mouseEventToContainerPoint(Q.touches[0]),X=J.mouseEventToContainerPoint(Q.touches[1]),K=Y.distanceTo(X)/this._startDist;if(this._zoom=J.getScaleZoom(K,this._startZoom),!J.options.bounceAtZoomLimits&&(this._zoom<J.getMinZoom()&&K<1||this._zoom>J.getMaxZoom()&&K>1))this._zoom=J._limitZoom(this._zoom);if(J.options.touchZoom==="center"){if(this._center=this._startLatLng,K===1)return}else{var V=Y._add(X)._divideBy(2)._subtract(this._centerPoint);if(K===1&&V.x===0&&V.y===0)return;this._center=J.unproject(J.project(this._pinchStartLatLng,this._zoom).subtract(V),this._zoom)}if(!this._moved)J._moveStart(!0,!1),this._moved=!0;n(this._animRequest);var U=A(J._move,J,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=p(U,this,!0),c(Q)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}if(this._zooming=!1,n(this._animRequest),C(document,"touchmove",this._onTouchMove,this),C(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation)this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap);else this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_.addInitHook("addHandler","touchZoom",G6),_.BoxZoom=K6,_.DoubleClickZoom=V6,_.Drag=U6,_.Keyboard=$6,_.ScrollWheelZoom=W6,_.TapHold=H6,_.TouchZoom=G6,H.Bounds=z,H.Browser=E,H.CRS=G0,H.Canvas=Q6,H.Circle=r1,H.CircleMarker=K1,H.Class=H0,H.Control=Y0,H.DivIcon=t5,H.DivOverlay=W0,H.DomEvent=o6,H.DomUtil=n6,H.Draggable=A0,H.Evented=j0,H.FeatureGroup=q0,H.GeoJSON=E0,H.GridLayer=l0,H.Handler=$0,H.Icon=B0,H.ImageOverlay=H1,H.LatLng=S,H.LatLngBounds=i,H.Layer=X0,H.LayerGroup=S0,H.LineUtil=q7,H.Map=_,H.Marker=X1,H.Mixin=V7,H.Path=R0,H.Point=N,H.PolyUtil=U7,H.Polygon=C0,H.Polyline=I0,H.Popup=G1,H.PosAnimation=j5,H.Projection=I7,H.Rectangle=X6,H.Renderer=M0,H.SVG=r0,H.SVGOverlay=n5,H.TileLayer=z0,H.Tooltip=q1,H.Transformation=F1,H.Util=N6,H.VideoOverlay=s5,H.bind=A,H.bounds=l,H.canvas=J6,H.circle=D7,H.circleMarker=F7,H.control=m0,H.divIcon=C7,H.extend=I,H.featureGroup=A7,H.geoJSON=a5,H.geoJson=k7,H.gridLayer=f7,H.icon=R7,H.imageOverlay=_7,H.latLng=k,H.latLngBounds=v,H.layerGroup=Z7,H.map=e6,H.marker=N7,H.point=R,H.polygon=T7,H.polyline=h7,H.popup=S7,H.rectangle=j7,H.setOptions=f,H.stamp=D,H.svg=Y6,H.svgOverlay=w7,H.tileLayer=o5,H.tooltip=B7,H.transformation=v0,H.version=M,H.videoOverlay=O7;var L7=window.L;H.noConflict=function(){return window.L=L7,this},window.L=H})});var N0=a7(A6(),1);class n7{constructor(H={}){let{coord:M={lat:0,long:0},zoom:I=13,marker_list:B=[],create_div:A=!0,div_id:d="map-display-div-id",rate_limit_ms:D=1000,locate_on_start:s=!1,lookup_api:y="https://<API-HERE>"}=H;this.locate_on_start=s,this.coord_config=M,this.lat=M.lat||0,this.long=M.long||0,this.zoom=I,this.marker_list=B,this.map=null,this.style="display: block; position: absolute; top:0; left: 0; height: 100vh; width: 100vw; margin: 0;",this.lookup_api=y,this.map_display_div_id=d,this.create_div=A,this.last_geocode_time=0,this.min_geocode_interval=D}move_to(H,M,I=13){this.map.setView(new N0.default.LatLng(H,M),I)}async locate_user(H=null,M=null){this.map.locate().on("locationfound",async(I)=>{await this.add_marker(I.latitude,I.longitude,"User Location","",H);let B=N0.default.circleMarker([I.latitude,I.longitude],I.accuracy/2,{weight:1,color:"blue"});this.map.addLayer(B)}).on("locationerror",(I)=>{if(console.error("Location error:",I),M)M(I);else throw Error("Location access denied")})}async#Y(){if(this.coord_config.address){let M=await this.addr_to_coord(this.coord_config.address);if(M?.length>0)this.lat=parseFloat(M[0].lat),this.long=parseFloat(M[0].long)}if(this.create_div){let M=document.createElement("div");M.setAttribute("id",this.map_display_div_id),M.setAttribute("style",this.style),document.body.appendChild(M)}this.map=N0.default.map(this.map_display_div_id).setView([this.lat,this.long],this.zoom);var H=new N0.default.TileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});if(this.map.addLayer(H),Array.isArray(this.marker_list)&&this.marker_list.length>0)await this.#J(this.marker_list)}async draw(H=null){if(typeof N0.default>"u")throw Error("Leaflet not loaded. Import L from Leaflet before using Mapper.");if(H===null)await this.#Y();else await this.#K(H);if(this.locate_on_start)await this.locate_user()}async#Q(H,M,I,B,A=null){let d=null;if(A){let{icon_url:y,icon_x:w=50,icon_y:u=100,icon_w:K0=100,icon_h:Q0=100}=A;d=new N0.default.icon({iconUrl:y,iconSize:[K0,Q0],iconAnchor:[w,u]})}let D={alt:I};if(d)D.icon=d;let s=new N0.default.Marker([H,M],D);if(B!=="")s.bindTooltip(B);s.addTo(this.map)}async add_marker(H,M,I="Marker",B="",A=null){await this.#Q(H,M,I,B,A)}async add_marker_list(H){await this.#J(H)}async#J(H){if(!Array.isArray(H))throw Error("marker_list must be array");let M=await Promise.allSettled(H.map((A,d)=>this.#X(A,d))),I=M.filter((A)=>A.status==="fulfilled").length,B=M.filter((A)=>A.status==="rejected");if(B.length>0)console.warn(`Markers: ${I} added, ${B.length} failed`),B.forEach((A)=>console.error(A.reason.message));return M}async#X(H,M){if(!H||typeof H!=="object")throw Error(`Marker ${M}: invalid marker data`);if(H.address){if(!H.address.trim())throw Error(`Marker ${M}: empty address`);let s=await this.addr_to_coord(H.address);if(!s?.length)throw Error(`Marker ${M}: address not found`);let y=[];for(let w of s){let u=parseFloat(w.lat),K0=parseFloat(w.long);if(isNaN(u)||isNaN(K0))continue;let Q0=w.name||"None";y.push(await this.#Q(u,K0,H.address,Q0))}return y}let{lat:I,long:B,alt:A="Marker",popup:d="",icon:D={}}=H;if(I==null||B==null)throw Error(`Marker ${M}: missing lat/long or address`);if(isNaN(I)||isNaN(B))throw Error(`Marker ${M}: invalid coords`);return this.#Q(I,B,A,d,D)}async#K(H){try{let M=JSON.parse(H);if(this.lat=M.position.lat,this.long=M.position.long,this.zoom=M.position.zoom,await this.#Y(),M.markers.length>0)await this.#J(M.markers)}catch(M){throw console.error("Failed to parse/draw from JSON:",M.message),M}}async addr_to_coord(H,M=1,I=1e4){let A=Date.now()-this.last_geocode_time;if(A<this.min_geocode_interval)await new Promise((K0)=>setTimeout(K0,this.min_geocode_interval-A));if(this.last_geocode_time=Date.now(),!H?.trim())throw Error("Invalid address");let d=`&limit=${M}`,D="/geocode?address=",s=`${this.lookup_api}${D}${encodeURIComponent(H.trim())}${d}`,y=new AbortController,w=setTimeout(()=>y.abort(),I),u=await fetch(s,{signal:y.signal});if(clearTimeout(w),!u.ok)throw Error(`Geocoding failed: ${u.status}`);return u.json()}destroy(){if(this.map)this.map.remove(),this.map=null;document.getElementById(this.map_display_div_id)?.remove()}}
